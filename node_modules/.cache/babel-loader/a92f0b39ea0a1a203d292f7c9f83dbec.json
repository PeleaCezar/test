{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Property, Event, closest, Collection, Complex, attributes, detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, select, isVisible } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, Browser, formatUnit, L10n } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, isNullOrUndefined as isNOU, selectAll, addClass, removeClass, remove } from '@syncfusion/ej2-base';\nimport { EventHandler, rippleEffect, Touch, compile, Animation } from '@syncfusion/ej2-base';\nimport { getRandomId, SanitizeHtmlHelper, Draggable } from '@syncfusion/ej2-base';\nimport { Toolbar } from '../toolbar/toolbar';\nvar CLS_TAB = 'e-tab';\nvar CLS_HEADER = 'e-tab-header';\nvar CLS_BLA_TEM = 'blazor-template';\nvar CLS_CONTENT = 'e-content';\nvar CLS_NEST = 'e-nested';\nvar CLS_ITEMS = 'e-items';\nvar CLS_ITEM = 'e-item';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_RTL = 'e-rtl';\nvar CLS_ACTIVE = 'e-active';\nvar CLS_DISABLE = 'e-disable';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_FOCUS = 'e-focused';\nvar CLS_ICONS = 'e-icons';\nvar CLS_ICON = 'e-icon';\nvar CLS_ICON_TAB = 'e-icon-tab';\nvar CLS_ICON_CLOSE = 'e-close-icon';\nvar CLS_CLOSE_SHOW = 'e-close-show';\nvar CLS_TEXT = 'e-tab-text';\nvar CLS_INDICATOR = 'e-indicator';\nvar CLS_WRAP = 'e-tab-wrap';\nvar CLS_TEXT_WRAP = 'e-text-wrap';\nvar CLS_TAB_ICON = 'e-tab-icon';\nvar CLS_TB_ITEMS = 'e-toolbar-items';\nvar CLS_TB_ITEM = 'e-toolbar-item';\nvar CLS_TB_POP = 'e-toolbar-pop';\nvar CLS_TB_POPUP = 'e-toolbar-popup';\nvar CLS_HOR_NAV = 'e-hor-nav';\nvar CLS_POPUP_OPEN = 'e-popup-open';\nvar CLS_POPUP_CLOSE = 'e-popup-close';\nvar CLS_PROGRESS = 'e-progress';\nvar CLS_IGNORE = 'e-ignore';\nvar CLS_OVERLAY = 'e-overlay';\nvar CLS_HSCRCNT = 'e-hscroll-content';\nvar CLS_VSCRCNT = 'e-vscroll-content';\nvar CLS_VTAB = 'e-vertical-tab';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_VLEFT = 'e-vertical-left';\nvar CLS_VRIGHT = 'e-vertical-right';\nvar CLS_HBOTTOM = 'e-horizontal-bottom';\nvar CLS_FILL = 'e-fill-mode';\nvar TABITEMPREFIX = 'tabitem_';\nvar CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\n/**\n * Objects used for configuring the Tab selecting item action properties.\n */\n\nvar TabActionSettings =\n/** @class */\nfunction (_super) {\n  __extends(TabActionSettings, _super);\n\n  function TabActionSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('SlideLeftIn')], TabActionSettings.prototype, \"effect\", void 0);\n\n  __decorate([Property(600)], TabActionSettings.prototype, \"duration\", void 0);\n\n  __decorate([Property('ease')], TabActionSettings.prototype, \"easing\", void 0);\n\n  return TabActionSettings;\n}(ChildProperty);\n\nexport { TabActionSettings };\n/**\n * Objects used for configuring the Tab animation properties.\n */\n\nvar TabAnimationSettings =\n/** @class */\nfunction (_super) {\n  __extends(TabAnimationSettings, _super);\n\n  function TabAnimationSettings() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Complex({\n    effect: 'SlideLeftIn',\n    duration: 600,\n    easing: 'ease'\n  }, TabActionSettings)], TabAnimationSettings.prototype, \"previous\", void 0);\n\n  __decorate([Complex({\n    effect: 'SlideRightIn',\n    duration: 600,\n    easing: 'ease'\n  }, TabActionSettings)], TabAnimationSettings.prototype, \"next\", void 0);\n\n  return TabAnimationSettings;\n}(ChildProperty);\n\nexport { TabAnimationSettings };\n/**\n * Objects used for configuring the Tab item header properties.\n */\n\nvar Header =\n/** @class */\nfunction (_super) {\n  __extends(Header, _super);\n\n  function Header() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Property('')], Header.prototype, \"text\", void 0);\n\n  __decorate([Property('')], Header.prototype, \"iconCss\", void 0);\n\n  __decorate([Property('left')], Header.prototype, \"iconPosition\", void 0);\n\n  return Header;\n}(ChildProperty);\n\nexport { Header };\n/**\n * An array of object that is used to configure the Tab.\n */\n\nvar TabItem =\n/** @class */\nfunction (_super) {\n  __extends(TabItem, _super);\n\n  function TabItem() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([Complex({}, Header)], TabItem.prototype, \"header\", void 0);\n\n  __decorate([Property(null)], TabItem.prototype, \"headerTemplate\", void 0);\n\n  __decorate([Property('')], TabItem.prototype, \"content\", void 0);\n\n  __decorate([Property('')], TabItem.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], TabItem.prototype, \"disabled\", void 0);\n\n  __decorate([Property(true)], TabItem.prototype, \"visible\", void 0);\n\n  __decorate([Property()], TabItem.prototype, \"id\", void 0);\n\n  return TabItem;\n}(ChildProperty);\n\nexport { TabItem };\n/**\n * Tab is a content panel to show multiple contents in a single space, one at a time.\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\n * ```html\n * <div id=\"tab\"></div>\n * <script>\n *   var tabObj = new Tab();\n *   tab.appendTo(\"#tab\");\n * </script>\n * ```\n */\n\nvar Tab =\n/** @class */\nfunction (_super) {\n  __extends(Tab, _super);\n  /**\n   * Initializes a new instance of the Tab class.\n   *\n   * @param {TabModel} options  - Specifies Tab model properties as options.\n   * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\n   */\n\n\n  function Tab(options, element) {\n    var _this = _super.call(this, options, element) || this;\n\n    _this.show = {};\n    _this.hide = {};\n    _this.maxHeight = 0;\n    _this.title = 'Close';\n    _this.isInteracted = false;\n    _this.lastIndex = 0;\n    _this.isAdd = false;\n    _this.isIconAlone = false;\n    _this.draggableItems = [];\n    _this.resizeContext = _this.refreshActiveTabBorder.bind(_this);\n    /**\n     * Contains the keyboard configuration of the Tab.\n     */\n\n    _this.keyConfigs = {\n      tab: 'tab',\n      home: 'home',\n      end: 'end',\n      enter: 'enter',\n      space: 'space',\n      delete: 'delete',\n      moveLeft: 'leftarrow',\n      moveRight: 'rightarrow',\n      moveUp: 'uparrow',\n      moveDown: 'downarrow'\n    };\n    return _this;\n  }\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\n   *\n   * @returns {void}\n   */\n\n\n  Tab.prototype.destroy = function () {\n    var _this = this;\n\n    if (this.isReact || this.isAngular) {\n      this.clearTemplate();\n    }\n\n    if (!isNOU(this.tbObj)) {\n      this.tbObj.destroy();\n      this.tbObj = null;\n    }\n\n    this.unWireEvents();\n    ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n      _this.element.removeAttribute(val);\n    });\n    this.expTemplateContent();\n\n    if (!this.isTemplate) {\n      while (this.element.firstElementChild) {\n        remove(this.element.firstElementChild);\n      }\n    } else {\n      var cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n      this.element.classList.remove(CLS_TEMPLATE);\n\n      if (!isNOU(cntEle)) {\n        cntEle.innerHTML = this.cnt;\n      }\n    }\n\n    if (this.btnCls) {\n      this.btnCls = null;\n    }\n\n    this.hdrEle = null;\n    this.cntEle = null;\n    this.tbItems = null;\n    this.tbItem = null;\n    this.tbPop = null;\n    this.prevItem = null;\n    this.popEle = null;\n    this.bdrLine = null;\n    this.content = null;\n    this.dragItem = null;\n    this.cloneElement = null;\n    this.draggingItems = [];\n\n    if (this.draggableItems && this.draggableItems.length > 0) {\n      for (var i = 0; i < this.draggableItems.length; i++) {\n        this.draggableItems[i].destroy();\n        this.draggableItems[i] = null;\n      }\n\n      this.draggableItems = [];\n    }\n\n    _super.prototype.destroy.call(this);\n\n    this.trigger('destroyed');\n  };\n  /**\n   * Refresh the tab component\n   *\n   * @returns {void}\n   */\n\n\n  Tab.prototype.refresh = function () {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    _super.prototype.refresh.call(this);\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n  /**\n   * Initialize component\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Tab.prototype.preRender = function () {\n    var nested = closest(this.element, '.' + CLS_CONTENT);\n    this.prevIndex = 0;\n    this.isNested = false;\n    this.isPopup = false;\n    this.initRender = true;\n    this.isSwipeed = false;\n    this.itemIndexArray = [];\n    this.templateEle = [];\n\n    if (this.allowDragAndDrop) {\n      this.dragArea = !isNOU(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER);\n    }\n\n    if (!isNOU(nested)) {\n      nested.parentElement.classList.add(CLS_NEST);\n      this.isNested = true;\n    }\n\n    var name = Browser.info.name;\n    var css = name === 'msie' ? 'e-ie' : name === 'edge' ? 'e-edge' : name === 'safari' ? 'e-safari' : '';\n    setStyle(this.element, {\n      'width': formatUnit(this.width),\n      'height': formatUnit(this.height)\n    });\n    this.setCssClass(this.element, this.cssClass, true);\n    attributes(this.element, {\n      role: 'tablist',\n      'aria-disabled': 'false',\n      'aria-activedescendant': ''\n    });\n    this.setCssClass(this.element, css, true);\n    this.updatePopAnimationConfig();\n  };\n  /**\n   * Initialize the component rendering\n   *\n   * @private\n   * @returns {void}\n   */\n\n\n  Tab.prototype.render = function () {\n    this.btnCls = this.createElement('span', {\n      className: CLS_ICONS + ' ' + CLS_ICON_CLOSE,\n      attrs: {\n        title: this.title\n      }\n    });\n    this.tabId = this.element.id.length > 0 ? '-' + this.element.id : getRandomId();\n    this.renderContainer();\n    this.wireEvents();\n    this.initRender = false;\n  };\n\n  Tab.prototype.renderContainer = function () {\n    var ele = this.element;\n    this.items.forEach(function (item, index) {\n      if (isNOU(item.id) && !isNOU(item.setProperties)) {\n        item.setProperties({\n          id: TABITEMPREFIX + index.toString()\n        }, true);\n      }\n    });\n\n    if (this.items.length > 0 && ele.children.length === 0) {\n      ele.appendChild(this.createElement('div', {\n        className: CLS_CONTENT\n      }));\n      this.setOrientation(this.headerPlacement, this.createElement('div', {\n        className: CLS_HEADER\n      }));\n      this.isTemplate = false;\n    } else if (this.element.children.length > 0) {\n      this.isTemplate = true;\n      ele.classList.add(CLS_TEMPLATE);\n      var header = ele.querySelector('.' + CLS_HEADER);\n\n      if (header && this.headerPlacement === 'Bottom') {\n        this.setOrientation(this.headerPlacement, header);\n      }\n    }\n\n    if (!isNOU(select('.' + CLS_HEADER, this.element)) && !isNOU(select('.' + CLS_CONTENT, this.element))) {\n      this.renderHeader();\n      this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\n      if (!isNOU(this.tbItems)) {\n        rippleEffect(this.tbItems, {\n          selector: '.e-tab-wrap'\n        });\n      }\n\n      this.renderContent();\n\n      if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        this.bdrLine = this.createElement('div', {\n          className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE\n        });\n        var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n        if (!isNOU(scrCnt)) {\n          scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n        } else {\n          this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n        }\n\n        this.setContentHeight(true);\n        this.select(this.selectedItem);\n      }\n\n      if (!isNOU(this.tbItem)) {\n        for (var i = 0; i < this.items.length; i++) {\n          var tabID = this.items[i].id;\n          this.tbItem[i].setAttribute('data-id', tabID);\n        }\n      }\n\n      this.setRTL(this.enableRtl);\n    }\n  };\n\n  Tab.prototype.serverItemsChanged = function () {\n    this.enableAnimation = false;\n    this.setActive(this.selectedItem, true);\n\n    if (this.loadOn !== 'Dynamic' && !isNOU(this.cntEle)) {\n      var itemCollection = [].slice.call(this.cntEle.children);\n      var content_1 = CLS_CONTENT + this.tabId + '_' + this.selectedItem;\n      itemCollection.forEach(function (item) {\n        if (item.classList.contains(CLS_ACTIVE) && item.id !== content_1) {\n          item.classList.remove(CLS_ACTIVE);\n        }\n\n        if (item.id === content_1) {\n          item.classList.add(CLS_ACTIVE);\n        }\n      });\n      this.prevIndex = this.selectedItem;\n      this.triggerAnimation(CLS_ITEM + this.tabId + '_' + this.selectedItem, false);\n    }\n\n    this.enableAnimation = true;\n  };\n\n  Tab.prototype.headerReady = function () {\n    this.initRender = true;\n    this.hdrEle = this.getTabHeader();\n    this.setOrientation(this.headerPlacement, this.hdrEle);\n\n    if (!isNOU(this.hdrEle)) {\n      this.tbObj = this.hdrEle && this.hdrEle.ej2_instances[0];\n    }\n\n    this.tbObj.clicked = this.clickHandler.bind(this);\n    this.tbObj.on('onItemsChanged', this.serverItemsChanged.bind(this));\n    this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n\n    if (!isNOU(this.tbItems)) {\n      rippleEffect(this.tbItems, {\n        selector: '.e-tab-wrap'\n      });\n    }\n\n    if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n      this.bdrLine = select('.' + CLS_INDICATOR + '.' + CLS_IGNORE, this.element);\n      var scrollCnt = select('.' + this.scrCntClass, this.tbItems);\n\n      if (!isNOU(scrollCnt)) {\n        scrollCnt.insertBefore(this.bdrLine, scrollCnt.firstElementChild);\n      } else {\n        this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstElementChild);\n      }\n\n      this.select(this.selectedItem);\n    }\n\n    this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n\n    if (this.loadOn === 'Demand') {\n      var id = this.setActiveContent();\n      this.triggerAnimation(id, false);\n    }\n\n    this.initRender = false;\n    this.renderComplete();\n  };\n\n  Tab.prototype.setActiveContent = function () {\n    var id = CLS_ITEM + this.tabId + '_' + this.selectedItem;\n    var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n    if (!isNOU(item)) {\n      item.classList.add(CLS_ACTIVE);\n    }\n\n    return id;\n  };\n\n  Tab.prototype.renderHeader = function () {\n    var _this = this;\n\n    var hdrPlace = this.headerPlacement;\n    var tabItems = [];\n    this.hdrEle = this.getTabHeader();\n    this.addVerticalClass();\n\n    if (!this.isTemplate) {\n      tabItems = this.parseObject(this.items, 0);\n    } else {\n      if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER)) {\n        this.setProperties({\n          headerPlacement: 'Bottom'\n        }, true);\n      }\n\n      var count = this.hdrEle.children.length;\n      var hdrItems = [];\n\n      for (var i = 0; i < count; i++) {\n        hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n      }\n\n      if (count > 0) {\n        while (this.hdrEle.firstElementChild) {\n          detach(this.hdrEle.firstElementChild);\n        }\n\n        var tabItems_1 = this.createElement('div', {\n          className: CLS_ITEMS\n        });\n        this.hdrEle.appendChild(tabItems_1);\n        hdrItems.forEach(function (item, index) {\n          _this.lastIndex = index;\n          var attr = {\n            className: CLS_ITEM,\n            id: CLS_ITEM + _this.tabId + '_' + index,\n            attrs: {\n              role: 'tab',\n              'aria-controls': CLS_CONTENT + _this.tabId + '_' + index,\n              'aria-selected': 'false'\n            }\n          };\n\n          var txt = _this.createElement('span', {\n            className: CLS_TEXT,\n            innerHTML: item,\n            attrs: {\n              'role': 'presentation'\n            }\n          }).outerHTML;\n\n          var cont = _this.createElement('div', {\n            className: CLS_TEXT_WRAP,\n            innerHTML: txt + _this.btnCls.outerHTML\n          }).outerHTML;\n\n          var wrap = _this.createElement('div', {\n            className: CLS_WRAP,\n            innerHTML: cont,\n            attrs: {\n              tabIndex: '-1'\n            }\n          });\n\n          tabItems_1.appendChild(_this.createElement('div', attr));\n          selectAll('.' + CLS_ITEM, tabItems_1)[index].appendChild(wrap);\n        });\n      }\n    }\n\n    this.tbObj = new Toolbar({\n      width: hdrPlace === 'Left' || hdrPlace === 'Right' ? 'auto' : '100%',\n      height: hdrPlace === 'Left' || hdrPlace === 'Right' ? '100%' : 'auto',\n      overflowMode: this.overflowMode,\n      items: tabItems.length !== 0 ? tabItems : [],\n      clicked: this.clickHandler.bind(this),\n      scrollStep: this.scrollStep,\n      enableHtmlSanitizer: this.enableHtmlSanitizer\n    });\n    this.tbObj.isStringTemplate = true;\n    this.tbObj.createElement = this.createElement;\n    this.tbObj.appendTo(this.hdrEle);\n    attributes(this.hdrEle, {\n      'aria-label': 'tab-header'\n    });\n    this.updateOrientationAttribute();\n    this.setCloseButton(this.showCloseButton);\n  };\n\n  Tab.prototype.renderContent = function () {\n    this.cntEle = select('.' + CLS_CONTENT, this.element);\n    var hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n\n    if (this.isTemplate) {\n      this.cnt = this.cntEle.children.length > 0 ? this.cntEle.innerHTML : '';\n      var contents = this.cntEle.children;\n\n      for (var i = 0; i < hdrItem.length; i++) {\n        if (contents.length - 1 >= i) {\n          addClass([contents.item(i)], CLS_ITEM);\n          attributes(contents.item(i), {\n            'role': 'tabpanel',\n            'aria-labelledby': CLS_ITEM + this.tabId + '_' + i\n          });\n          contents.item(i).id = CLS_CONTENT + this.tabId + '_' + i;\n        }\n      }\n    }\n  };\n\n  Tab.prototype.reRenderItems = function () {\n    this.renderContainer();\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n  };\n\n  Tab.prototype.parseObject = function (items, index) {\n    var _this = this;\n\n    var tbItems = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element);\n    var maxId = this.lastIndex;\n\n    if (!this.isReplace && tbItems.length > 0) {\n      var idList_1 = [];\n      tbItems.forEach(function (item) {\n        idList_1.push(parseInt(item.id.slice(item.id.indexOf('_') + 1), 10));\n      });\n      maxId = Math.max.apply(Math, idList_1);\n    }\n\n    var tItems = [];\n    var txtWrapEle;\n    var spliceArray = [];\n    var i = 0;\n    items.forEach(function (item, i) {\n      var pos = isNOU(item.header) || isNOU(item.header.iconPosition) ? '' : item.header.iconPosition;\n      var css = isNOU(item.header) || isNOU(item.header.iconCss) ? '' : item.header.iconCss;\n\n      if (isNOU(item.headerTemplate) && (isNOU(item.header) || isNOU(item.header.text) || item.header.text.length === 0 && css === '')) {\n        spliceArray.push(i);\n        return;\n      }\n\n      var txt = item.headerTemplate || item.header.text;\n\n      if (typeof txt === 'string' && _this.enableHtmlSanitizer) {\n        txt = SanitizeHtmlHelper.sanitize(txt);\n      }\n\n      var itemIndex;\n\n      if (_this.isReplace && !isNOU(_this.tbId) && _this.tbId !== '') {\n        var num = _this.tbId.indexOf('_');\n\n        itemIndex = parseInt(_this.tbId.substring(num + 1), 10);\n        _this.tbId = '';\n      } else {\n        itemIndex = index + i;\n      }\n\n      _this.lastIndex = tbItems.length === 0 ? i : _this.isReplace ? itemIndex : maxId + 1 + i;\n      var disabled = item.disabled ? ' ' + CLS_DISABLE + ' ' + CLS_OVERLAY : '';\n      var hidden = item.visible === false ? ' ' + CLS_HIDDEN : '';\n      txtWrapEle = _this.createElement('div', {\n        className: CLS_TEXT,\n        attrs: {\n          'role': 'presentation'\n        }\n      });\n      var tHtml = txt instanceof Object ? txt.outerHTML : txt;\n      var txtEmpty = !isNOU(tHtml) && tHtml !== '';\n\n      if (!isNOU(txt.tagName)) {\n        txtWrapEle.appendChild(txt);\n      } else {\n        _this.headerTextCompile(txtWrapEle, txt, i);\n      }\n\n      var tEle;\n\n      var icon = _this.createElement('span', {\n        className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n      });\n\n      var tCont = _this.createElement('div', {\n        className: CLS_TEXT_WRAP\n      });\n\n      tCont.appendChild(txtWrapEle);\n\n      if (txt !== '' && txt !== undefined && css !== '') {\n        if (pos === 'left' || pos === 'top') {\n          tCont.insertBefore(icon, tCont.firstElementChild);\n        } else {\n          tCont.appendChild(icon);\n        }\n\n        tEle = txtWrapEle;\n        _this.isIconAlone = false;\n      } else {\n        tEle = css === '' ? txtWrapEle : icon;\n\n        if (tEle === icon) {\n          detach(txtWrapEle);\n          tCont.appendChild(icon);\n          _this.isIconAlone = true;\n        }\n      }\n\n      var wrapAttrs = item.disabled ? {} : {\n        tabIndex: '-1'\n      };\n      tCont.appendChild(_this.btnCls.cloneNode(true));\n\n      var wrap = _this.createElement('div', {\n        className: CLS_WRAP,\n        attrs: wrapAttrs\n      });\n\n      wrap.appendChild(tCont);\n\n      if (_this.itemIndexArray === []) {\n        _this.itemIndexArray.push(CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n      } else {\n        _this.itemIndexArray.splice(index + i, 0, CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n      }\n\n      var attrObj = {\n        id: CLS_ITEM + _this.tabId + '_' + _this.lastIndex,\n        role: 'tab',\n        'aria-selected': 'false'\n      };\n      var tItem = {\n        htmlAttributes: attrObj,\n        template: wrap\n      };\n      tItem.cssClass = (item.cssClass !== undefined ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' ' + (css !== '' ? 'e-i' + pos : '') + ' ' + (!txtEmpty ? CLS_ICON : '');\n\n      if (pos === 'top' || pos === 'bottom') {\n        _this.element.classList.add('e-vertical-icon');\n      }\n\n      tItems.push(tItem);\n      i++;\n    });\n\n    if (!this.isAdd) {\n      spliceArray.forEach(function (spliceItemIndex) {\n        _this.items.splice(spliceItemIndex, 1);\n      });\n    }\n\n    if (this.isIconAlone) {\n      this.element.classList.add(CLS_ICON_TAB);\n    } else {\n      this.element.classList.remove(CLS_ICON_TAB);\n    }\n\n    return tItems;\n  };\n\n  Tab.prototype.removeActiveClass = function () {\n    var tabHeader = this.getTabHeader();\n\n    if (tabHeader) {\n      var tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, tabHeader);\n      [].slice.call(tabItems).forEach(function (node) {\n        return node.classList.remove(CLS_ACTIVE);\n      });\n    }\n  };\n\n  Tab.prototype.checkPopupOverflow = function (ele) {\n    this.tbPop = select('.' + CLS_TB_POP, this.element);\n    var popIcon = select('.e-hor-nav', this.element);\n    var tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n    var lastChild = tbrItems.lastChild;\n    var isOverflow = false;\n\n    if (!this.isVertical() && (this.enableRtl && popIcon.offsetLeft + popIcon.offsetWidth > tbrItems.offsetLeft || !this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth)) {\n      isOverflow = true;\n    } else if (this.isVertical() && popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight) {\n      isOverflow = true;\n    }\n\n    if (isOverflow) {\n      ele.classList.add(CLS_TB_POPUP);\n      this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n    }\n\n    return true;\n  };\n\n  Tab.prototype.popupHandler = function (target) {\n    var ripEle = target.querySelector('.e-ripple-element');\n\n    if (!isNOU(ripEle)) {\n      ripEle.outerHTML = '';\n      target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n    }\n\n    this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n    var lastChild = this.tbItem[this.tbItem.length - 1];\n\n    if (this.tbItem.length !== 0) {\n      target.classList.remove(CLS_TB_POPUP);\n      target.removeAttribute('style');\n      this.tbItems.appendChild(target);\n      this.actEleId = target.id;\n\n      if (this.checkPopupOverflow(lastChild)) {\n        var prevEle = this.tbItems.lastChild.previousElementSibling;\n        this.checkPopupOverflow(prevEle);\n      }\n\n      this.isPopup = true;\n    }\n\n    return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n  };\n\n  Tab.prototype.updateOrientationAttribute = function () {\n    attributes(this.element, {\n      'aria-orientation': this.isVertical() ? 'vertical' : 'horizontal'\n    });\n  };\n\n  Tab.prototype.setCloseButton = function (val) {\n    var trg = select('.' + CLS_HEADER, this.element);\n\n    if (val === true) {\n      trg.classList.add(CLS_CLOSE_SHOW);\n    } else {\n      trg.classList.remove(CLS_CLOSE_SHOW);\n    }\n\n    this.tbObj.refreshOverflow();\n    this.refreshActiveTabBorder();\n  };\n\n  Tab.prototype.prevCtnAnimation = function (prev, current) {\n    var animation;\n    var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n\n    if (this.isPopup || prev <= current) {\n      if (this.animation.previous.effect === 'SlideLeftIn') {\n        animation = {\n          name: 'SlideLeftOut',\n          duration: this.animation.previous.duration,\n          timingFunction: this.animation.previous.easing\n        };\n      } else {\n        animation = null;\n      }\n    } else {\n      if (this.animation.next.effect === 'SlideRightIn') {\n        animation = {\n          name: 'SlideRightOut',\n          duration: this.animation.next.duration,\n          timingFunction: this.animation.next.easing\n        };\n      } else {\n        animation = null;\n      }\n    }\n\n    return animation;\n  };\n\n  Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n    var _this = this;\n\n    var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n\n    if (!isNOU(animateObj)) {\n      animateObj.begin = function () {\n        setStyle(oldCnt, {\n          'position': 'absolute'\n        });\n        oldCnt.classList.add(CLS_PROGRESS);\n        oldCnt.classList.add('e-view');\n      };\n\n      animateObj.end = function () {\n        oldCnt.style.display = 'none';\n        oldCnt.classList.remove(CLS_ACTIVE);\n        oldCnt.classList.remove(CLS_PROGRESS);\n        oldCnt.classList.remove('e-view');\n        setStyle(oldCnt, {\n          'display': '',\n          'position': ''\n        });\n\n        if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {\n          detach(oldCnt);\n        }\n      };\n\n      new Animation(animateObj).animate(oldCnt);\n    } else {\n      oldCnt.classList.remove(CLS_ACTIVE);\n    }\n  };\n\n  Tab.prototype.triggerAnimation = function (id, value) {\n    var _this = this;\n\n    var prevIndex = this.prevIndex;\n    var oldCnt;\n    var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\n    itemCollection.forEach(function (item) {\n      if (item.id === _this.prevActiveEle) {\n        oldCnt = item;\n      }\n    });\n    var prevEle = this.tbItem[prevIndex];\n    var newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n    if (isNOU(oldCnt) && !isNOU(prevEle)) {\n      var idNo = this.extIndex(prevEle.id);\n      oldCnt = this.getTrgContent(this.cntEle, idNo);\n    }\n\n    if (!isNOU(newCnt)) {\n      this.prevActiveEle = newCnt.id;\n    }\n\n    if (this.initRender || value === false || this.animation === {} || isNOU(this.animation)) {\n      if (oldCnt && oldCnt !== newCnt) {\n        oldCnt.classList.remove(CLS_ACTIVE);\n      }\n\n      return;\n    }\n\n    var cnt = select('.' + CLS_CONTENT, this.element);\n    var animateObj;\n\n    if (this.prevIndex > this.selectedItem && !this.isPopup) {\n      var openEff = this.animation.previous.effect;\n      animateObj = {\n        name: openEff === 'None' ? '' : openEff !== 'SlideLeftIn' ? openEff : 'SlideLeftIn',\n        duration: this.animation.previous.duration,\n        timingFunction: this.animation.previous.easing\n      };\n    } else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n      var clsEff = this.animation.next.effect;\n      animateObj = {\n        name: clsEff === 'None' ? '' : clsEff !== 'SlideRightIn' ? clsEff : 'SlideRightIn',\n        duration: this.animation.next.duration,\n        timingFunction: this.animation.next.easing\n      };\n    }\n\n    animateObj.progress = function () {\n      cnt.classList.add(CLS_PROGRESS);\n\n      _this.setActiveBorder();\n    };\n\n    animateObj.end = function () {\n      cnt.classList.remove(CLS_PROGRESS);\n      newCnt.classList.add(CLS_ACTIVE);\n    };\n\n    if (!this.initRender && !isNOU(oldCnt)) {\n      this.triggerPrevAnimation(oldCnt, prevIndex);\n    }\n\n    this.isPopup = false;\n\n    if (animateObj.name === '') {\n      newCnt.classList.add(CLS_ACTIVE);\n    } else {\n      new Animation(animateObj).animate(newCnt);\n    }\n  };\n\n  Tab.prototype.keyPressed = function (trg) {\n    var trgParent = closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\n    var trgIndex = this.getEleIndex(trgParent);\n\n    if (!isNOU(this.popEle) && trg.classList.contains('e-hor-nav')) {\n      this.popEle.classList.contains(CLS_POPUP_OPEN) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n    } else if (trg.classList.contains('e-scroll-nav')) {\n      trg.click();\n    } else {\n      if (!isNOU(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n        this.selectTab(trgIndex, null, true);\n\n        if (!isNOU(this.popEle)) {\n          this.popObj.hide(this.hide);\n        }\n      }\n    }\n  };\n\n  Tab.prototype.getTabHeader = function () {\n    if (isNOU(this.element)) {\n      return undefined;\n    }\n\n    var headers = [].slice.call(this.element.children).filter(function (e) {\n      return e.classList.contains(CLS_HEADER);\n    });\n\n    if (headers.length > 0) {\n      return headers[0];\n    } else {\n      var wrap = [].slice.call(this.element.children).filter(function (e) {\n        return !e.classList.contains(CLS_BLA_TEM);\n      })[0];\n\n      if (!wrap) {\n        return undefined;\n      }\n\n      return [].slice.call(wrap.children).filter(function (e) {\n        return e.classList.contains(CLS_HEADER);\n      })[0];\n    }\n  };\n\n  Tab.prototype.getEleIndex = function (item) {\n    return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\n  };\n\n  Tab.prototype.extIndex = function (id) {\n    return id.replace(CLS_ITEM + this.tabId + '_', '');\n  };\n\n  Tab.prototype.expTemplateContent = function () {\n    var _this = this;\n\n    this.templateEle.forEach(function (eleStr) {\n      if (!isNOU(_this.element.querySelector(eleStr))) {\n        document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\n      }\n    });\n  };\n\n  Tab.prototype.templateCompile = function (ele, cnt, index) {\n    var tempEle = this.createElement('div');\n    this.compileElement(tempEle, cnt, 'content', index);\n\n    if (tempEle.childNodes.length !== 0) {\n      ele.appendChild(tempEle);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Tab.prototype.compileElement = function (ele, val, prop, index) {\n    var templateFn;\n\n    if (typeof val === 'string') {\n      val = val.trim();\n\n      if (this.isVue) {\n        templateFn = compile(SanitizeHtmlHelper.sanitize(val));\n      } else {\n        ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\n      }\n    } else {\n      templateFn = compile(val);\n    }\n\n    var templateFUN;\n\n    if (!isNOU(templateFn)) {\n      templateFUN = templateFn({}, this, prop);\n    }\n\n    if (!isNOU(templateFn) && templateFUN.length > 0) {\n      [].slice.call(templateFUN).forEach(function (el) {\n        ele.appendChild(el);\n      });\n    }\n  };\n\n  Tab.prototype.headerTextCompile = function (element, text, index) {\n    this.compileElement(element, text, 'headerTemplate', index);\n  };\n\n  Tab.prototype.getContent = function (ele, cnt, callType, index) {\n    var eleStr;\n    cnt = isNOU(cnt) ? \"\" : cnt;\n\n    if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n      if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n        cnt = SanitizeHtmlHelper.sanitize(cnt);\n      }\n\n      if (cnt[0] === '.' || cnt[0] === '#') {\n        if (document.querySelectorAll(cnt).length) {\n          var eleVal = document.querySelector(cnt);\n          eleStr = eleVal.outerHTML.trim();\n\n          if (callType === 'clone') {\n            ele.appendChild(eleVal.cloneNode(true));\n          } else {\n            ele.appendChild(eleVal);\n            eleVal.style.display = '';\n          }\n        } else {\n          this.templateCompile(ele, cnt, index);\n        }\n      } else {\n        this.templateCompile(ele, cnt, index);\n      }\n    } else {\n      ele.appendChild(cnt);\n    }\n\n    if (!isNOU(eleStr)) {\n      if (this.templateEle.indexOf(cnt.toString()) === -1) {\n        this.templateEle.push(cnt.toString());\n      }\n    }\n  };\n\n  Tab.prototype.getTrgContent = function (cntEle, no) {\n    var ele;\n\n    if (this.element.classList.contains(CLS_NEST)) {\n      ele = select('.' + CLS_NEST + '> .' + CLS_CONTENT + ' > #' + CLS_CONTENT + this.tabId + '_' + no, this.element);\n    } else {\n      ele = this.findEle(cntEle.children, CLS_CONTENT + this.tabId + '_' + no);\n    }\n\n    return ele;\n  };\n\n  Tab.prototype.findEle = function (items, key) {\n    var ele;\n\n    for (var i = 0; i < items.length; i++) {\n      if (items[i].id === key) {\n        ele = items[i];\n        break;\n      }\n    }\n\n    return ele;\n  };\n\n  Tab.prototype.isVertical = function () {\n    var isVertical = this.headerPlacement === 'Left' || this.headerPlacement === 'Right' ? true : false;\n    this.scrCntClass = isVertical ? CLS_VSCRCNT : CLS_HSCRCNT;\n    return isVertical;\n  };\n\n  Tab.prototype.addVerticalClass = function () {\n    if (this.isVertical()) {\n      var tbPos = this.headerPlacement === 'Left' ? CLS_VLEFT : CLS_VRIGHT;\n      addClass([this.hdrEle], [CLS_VERTICAL, tbPos]);\n\n      if (!this.element.classList.contains(CLS_NEST)) {\n        addClass([this.element], [CLS_VTAB, tbPos]);\n      } else {\n        addClass([this.hdrEle], [CLS_VTAB, tbPos]);\n      }\n    }\n\n    if (this.headerPlacement === 'Bottom') {\n      addClass([this.hdrEle], [CLS_HBOTTOM]);\n    }\n  };\n\n  Tab.prototype.updatePopAnimationConfig = function () {\n    this.show = {\n      name: this.isVertical() ? 'FadeIn' : 'SlideDown',\n      duration: 100\n    };\n    this.hide = {\n      name: this.isVertical() ? 'FadeOut' : 'SlideUp',\n      duration: 100\n    };\n  };\n\n  Tab.prototype.changeOrientation = function (place) {\n    this.setOrientation(place, this.hdrEle);\n    var activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE);\n    var isVertical = this.hdrEle.classList.contains(CLS_VERTICAL) ? true : false;\n    removeClass([this.element], [CLS_VTAB]);\n    removeClass([this.hdrEle], [CLS_VERTICAL, CLS_VLEFT, CLS_VRIGHT]);\n\n    if (isVertical !== this.isVertical()) {\n      this.changeToolbarOrientation();\n\n      if (!isNOU(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\n        this.popupHandler(activeTab);\n      }\n    }\n\n    this.addVerticalClass();\n    this.updateOrientationAttribute();\n    this.setActiveBorder();\n    this.focusItem();\n  };\n\n  Tab.prototype.focusItem = function () {\n    var curActItem = select(' #' + CLS_ITEM + this.tabId + '_' + this.selectedItem, this.hdrEle);\n\n    if (!isNOU(curActItem)) {\n      curActItem.firstElementChild.focus();\n    }\n  };\n\n  Tab.prototype.changeToolbarOrientation = function () {\n    this.tbObj.setProperties({\n      height: this.isVertical() ? '100%' : 'auto',\n      width: this.isVertical() ? 'auto' : '100%'\n    }, true);\n    this.tbObj.changeOrientation();\n    this.updatePopAnimationConfig();\n  };\n\n  Tab.prototype.setOrientation = function (place, ele) {\n    var headerPos = Array.prototype.indexOf.call(this.element.children, ele);\n    var contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT));\n\n    if (place === 'Bottom' && contentPos > headerPos) {\n      this.element.appendChild(ele);\n    } else {\n      removeClass([ele], [CLS_HBOTTOM]);\n      this.element.insertBefore(ele, select('.' + CLS_CONTENT, this.element));\n    }\n  };\n\n  Tab.prototype.setCssClass = function (ele, cls, val) {\n    if (cls === '') {\n      return;\n    }\n\n    var list = cls.split(' ');\n\n    for (var i = 0; i < list.length; i++) {\n      if (val) {\n        ele.classList.add(list[i]);\n      } else {\n        ele.classList.remove(list[i]);\n      }\n    }\n  };\n\n  Tab.prototype.setContentHeight = function (val) {\n    if (this.element.classList.contains(CLS_FILL)) {\n      removeClass([this.element], [CLS_FILL]);\n    }\n\n    if (isNOU(this.cntEle)) {\n      return;\n    }\n\n    var hdrEle = this.getTabHeader();\n\n    if (this.heightAdjustMode === 'None') {\n      if (this.height === 'auto') {\n        return;\n      } else {\n        if (!this.isVertical()) {\n          setStyle(this.cntEle, {\n            'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n          });\n        }\n      }\n    } else if (this.heightAdjustMode === 'Fill') {\n      addClass([this.element], [CLS_FILL]);\n      setStyle(this.element, {\n        'height': '100%'\n      });\n      setStyle(this.cntEle, {\n        'height': this.element.offsetHeight - hdrEle.offsetHeight + 'px'\n      });\n    } else if (this.heightAdjustMode === 'Auto') {\n      if (this.isTemplate === true) {\n        var cnt = selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n\n        for (var i = 0; i < cnt.length; i++) {\n          cnt[i].setAttribute('style', 'display:block; visibility: visible');\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n          cnt[i].style.removeProperty('display');\n          cnt[i].style.removeProperty('visibility');\n        }\n      } else {\n        this.cntEle = select('.' + CLS_CONTENT, this.element);\n\n        if (val === true) {\n          this.cntEle.appendChild(this.createElement('div', {\n            id: CLS_CONTENT + this.tabId + '_' + 0,\n            className: CLS_ITEM + ' ' + CLS_ACTIVE,\n            attrs: {\n              'role': 'tabpanel',\n              'aria-labelledby': CLS_ITEM + this.tabId + '_' + 0\n            }\n          }));\n        }\n\n        var ele = this.cntEle.children.item(0);\n\n        for (var i = 0; i < this.items.length; i++) {\n          this.getContent(ele, this.items[i].content, 'clone', i);\n          this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n\n          while (ele.firstChild) {\n            ele.removeChild(ele.firstChild);\n          }\n        }\n\n        if (this.isReact) {\n          this.clearTemplate(['content']);\n        }\n\n        this.templateEle = [];\n        this.getContent(ele, this.items[0].content, 'render', 0);\n\n        if (this.prevIndex !== this.selectedItem) {\n          ele.classList.remove(CLS_ACTIVE);\n        }\n      }\n\n      setStyle(this.cntEle, {\n        'height': this.maxHeight + 'px'\n      });\n    } else {\n      setStyle(this.cntEle, {\n        'height': 'auto'\n      });\n    }\n  };\n\n  Tab.prototype.getHeight = function (ele) {\n    var cs = window.getComputedStyle(ele);\n    return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) + parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n  };\n\n  Tab.prototype.setActiveBorder = function () {\n    var trgHdrEle = this.getTabHeader();\n    var trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, trgHdrEle);\n\n    if (isNOU(trg)) {\n      return;\n    }\n\n    if (!this.reorderActiveTab) {\n      if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN)) {\n        this.bdrLine.classList.add(CLS_HIDDEN);\n      }\n\n      if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\n        trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\n      }\n    } else if (trgHdrEle) {\n      trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\n    }\n\n    var root = closest(trg, '.' + CLS_TAB);\n\n    if (this.element !== root) {\n      return;\n    }\n\n    this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\n    var bar = select('.' + CLS_INDICATOR, trgHdrEle);\n    var scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\n\n    if (this.isVertical()) {\n      setStyle(bar, {\n        'left': '',\n        'right': ''\n      });\n      var tbHeight = isNOU(scrollCnt) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\n\n      if (tbHeight !== 0) {\n        setStyle(bar, {\n          'top': trg.offsetTop + 'px',\n          'height': trg.offsetHeight + 'px'\n        });\n      } else {\n        setStyle(bar, {\n          'top': 0,\n          'height': 0\n        });\n      }\n    } else {\n      if (this.overflowMode === 'MultiRow') {\n        var bar_1 = select('.' + CLS_INDICATOR, this.element);\n        setStyle(bar_1, {\n          'top': trg.offsetHeight + trg.offsetTop + 'px',\n          'height': ''\n        });\n      } else {\n        setStyle(bar, {\n          'top': '',\n          'height': ''\n        });\n      }\n\n      var tbWidth = isNOU(scrollCnt) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\n\n      if (tbWidth !== 0) {\n        setStyle(bar, {\n          'left': trg.offsetLeft + 'px',\n          'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px'\n        });\n      } else {\n        setStyle(bar, {\n          'left': 'auto',\n          'right': 'auto'\n        });\n      }\n    }\n\n    if (!isNOU(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\n      this.bdrLine.classList.remove(CLS_HIDDEN);\n    }\n  };\n\n  Tab.prototype.setActive = function (value, skipDataBind, isInteracted) {\n    if (skipDataBind === void 0) {\n      skipDataBind = false;\n    }\n\n    if (isInteracted === void 0) {\n      isInteracted = false;\n    }\n\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n    var trg = this.tbItem[value];\n\n    if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n      return;\n    }\n\n    if (value >= 0 && !skipDataBind) {\n      this.allowServerDataBinding = false;\n      this.setProperties({\n        selectedItem: value\n      }, true);\n      this.allowServerDataBinding = true;\n\n      if (!this.initRender) {\n        this.serverDataBind();\n      }\n    }\n\n    if (trg.classList.contains(CLS_ACTIVE)) {\n      this.setActiveBorder();\n      return;\n    }\n\n    if (!this.isTemplate) {\n      var prev = this.tbItem[this.prevIndex];\n\n      if (!isNOU(prev)) {\n        prev.removeAttribute('aria-controls');\n      }\n\n      attributes(trg, {\n        'aria-controls': CLS_CONTENT + this.tabId + '_' + value\n      });\n    }\n\n    var id = trg.id;\n    this.removeActiveClass();\n    trg.classList.add(CLS_ACTIVE);\n    this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\n    trg.setAttribute('aria-selected', 'true');\n    var no = Number(this.extIndex(id));\n\n    if (isNOU(this.prevActiveEle)) {\n      this.prevActiveEle = CLS_CONTENT + this.tabId + '_' + no;\n    }\n\n    attributes(this.element, {\n      'aria-activedescendant': id\n    });\n\n    if (this.isTemplate) {\n      if (select('.' + CLS_CONTENT, this.element).children.length > 0) {\n        var trg_1 = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + this.tabId + '_' + no);\n\n        if (!isNOU(trg_1)) {\n          trg_1.classList.add(CLS_ACTIVE);\n        }\n\n        this.triggerAnimation(id, this.enableAnimation);\n      }\n    } else {\n      this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n      var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n\n      if (isNOU(item)) {\n        this.cntEle.appendChild(this.createElement('div', {\n          id: CLS_CONTENT + this.tabId + '_' + this.extIndex(id),\n          className: CLS_ITEM + ' ' + CLS_ACTIVE,\n          attrs: {\n            role: 'tabpanel',\n            'aria-labelledby': CLS_ITEM + this.tabId + '_' + this.extIndex(id)\n          }\n        }));\n        var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n        var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\n        this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\n      } else {\n        item.classList.add(CLS_ACTIVE);\n      }\n\n      this.triggerAnimation(id, this.enableAnimation);\n    }\n\n    this.setActiveBorder();\n    this.refreshItemVisibility(trg);\n\n    if (!this.initRender && !skipDataBind) {\n      trg.firstElementChild.focus();\n      var eventArg = {\n        previousItem: this.prevItem,\n        previousIndex: this.prevIndex,\n        selectedItem: trg,\n        selectedIndex: value,\n        selectedContent: select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content),\n        isSwiped: this.isSwipeed,\n        isInteracted: isInteracted\n      };\n      this.trigger('selected', eventArg);\n    }\n  };\n\n  Tab.prototype.contentReady = function () {\n    var id = this.setActiveContent();\n    this.triggerAnimation(id, this.enableAnimation);\n  };\n\n  Tab.prototype.setItems = function (items) {\n    this.isReplace = true;\n    this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n    this.tbObj.items = this.parseObject(items, 0);\n    this.tbObj.dataBind();\n    this.isReplace = false;\n  };\n\n  Tab.prototype.setRTL = function (value) {\n    this.tbObj.enableRtl = value;\n    this.tbObj.dataBind();\n    this.setCssClass(this.element, CLS_RTL, value);\n    this.refreshActiveBorder();\n  };\n\n  Tab.prototype.refreshActiveBorder = function () {\n    if (!isNOU(this.bdrLine)) {\n      this.bdrLine.classList.add(CLS_HIDDEN);\n    }\n\n    this.setActiveBorder();\n  };\n\n  Tab.prototype.showPopup = function (config) {\n    var tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\n\n    if (tbPop.classList.contains('e-popup-close')) {\n      var tbPopObj = tbPop && tbPop.ej2_instances[0];\n      tbPopObj.position.X = this.headerPlacement === 'Left' ? 'left' : 'right';\n      tbPopObj.dataBind();\n      tbPopObj.show(config);\n    }\n  };\n\n  Tab.prototype.bindDraggable = function () {\n    var _this = this;\n\n    if (this.allowDragAndDrop) {\n      var tabHeader = this.element.querySelector('.' + CLS_HEADER);\n\n      if (tabHeader) {\n        var items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\n        items.forEach(function (element) {\n          _this.initializeDrag(element);\n        });\n      }\n    }\n  };\n\n  Tab.prototype.wireEvents = function () {\n    this.bindDraggable();\n    window.addEventListener('resize', this.resizeContext);\n    EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n    EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n\n    if (!isNOU(this.cntEle)) {\n      this.touchModule = new Touch(this.cntEle, {\n        swipe: this.swipeHandler.bind(this)\n      });\n    }\n\n    this.keyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: this.keyConfigs\n    });\n    this.tabKeyModule = new KeyboardEvents(this.element, {\n      keyAction: this.keyHandler.bind(this),\n      keyConfigs: {\n        openPopup: 'shift+f10',\n        tab: 'tab',\n        shiftTab: 'shift+tab'\n      },\n      eventName: 'keydown'\n    });\n  };\n\n  Tab.prototype.unWireEvents = function () {\n    if (!isNOU(this.keyModule)) {\n      this.keyModule.destroy();\n    }\n\n    if (!isNOU(this.tabKeyModule)) {\n      this.tabKeyModule.destroy();\n    }\n\n    if (!isNOU(this.cntEle) && !isNOU(this.touchModule)) {\n      this.touchModule.destroy();\n      this.touchModule = null;\n    }\n\n    window.removeEventListener('resize', this.resizeContext);\n    EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n    EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\n    this.element.classList.remove(CLS_RTL);\n    this.element.classList.remove(CLS_FOCUS);\n  };\n\n  Tab.prototype.clickHandler = function (args) {\n    this.element.classList.remove(CLS_FOCUS);\n    var trg = args.originalEvent.target;\n    var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n    var trgIndex = this.getEleIndex(trgParent);\n\n    if (trg.classList.contains(CLS_ICON_CLOSE)) {\n      this.removeTab(trgIndex);\n    } else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\n      this.showPopup(this.show);\n    } else {\n      this.isPopup = false;\n\n      if (!isNOU(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\n        this.selectTab(trgIndex, args.originalEvent, true);\n      }\n    }\n  };\n\n  Tab.prototype.swipeHandler = function (e) {\n    if (e.velocity < 3 && isNOU(e.originalEvent.changedTouches)) {\n      return;\n    }\n\n    if (this.isNested) {\n      this.element.setAttribute('data-swipe', 'true');\n    }\n\n    var nestedTab = this.element.querySelector('[data-swipe=\"true\"]');\n\n    if (nestedTab) {\n      nestedTab.removeAttribute('data-swipe');\n      return;\n    }\n\n    this.isSwipeed = true;\n\n    if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n      for (var k = this.selectedItem - 1; k >= 0; k--) {\n        if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n          this.selectTab(k, null, true);\n          break;\n        }\n      }\n    } else if (e.swipeDirection === 'Left' && this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1) {\n      for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n        if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n          this.selectTab(i, null, true);\n          break;\n        }\n      }\n    }\n\n    this.isSwipeed = false;\n  };\n\n  Tab.prototype.spaceKeyDown = function (e) {\n    if (e.keyCode === 32 && e.which === 32 || e.keyCode === 35 && e.which === 35) {\n      var clstHead = closest(e.target, '.' + CLS_HEADER);\n\n      if (!isNOU(clstHead)) {\n        e.preventDefault();\n      }\n    }\n  };\n\n  Tab.prototype.keyHandler = function (e) {\n    if (this.element.classList.contains(CLS_DISABLE)) {\n      return;\n    }\n\n    this.element.classList.add(CLS_FOCUS);\n    var trg = e.target;\n    var tabHeader = this.getTabHeader();\n    var actEle = select('.' + CLS_ACTIVE, tabHeader);\n    this.popEle = select('.' + CLS_TB_POP, tabHeader);\n\n    if (!isNOU(this.popEle)) {\n      this.popObj = this.popEle.ej2_instances[0];\n    }\n\n    var item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n    var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n\n    switch (e.action) {\n      case 'space':\n      case 'enter':\n        if (trg.parentElement.classList.contains(CLS_DISABLE)) {\n          return;\n        }\n\n        if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n          this.showPopup(this.show);\n          break;\n        }\n\n        this.keyPressed(trg);\n        break;\n\n      case 'tab':\n      case 'shiftTab':\n        if (trg.classList.contains(CLS_WRAP) && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n          trg.setAttribute('tabindex', '-1');\n        }\n\n        if (this.popObj && isVisible(this.popObj.element)) {\n          this.popObj.hide(this.hide);\n        }\n\n        actEle.children.item(0).setAttribute('tabindex', '0');\n        break;\n\n      case 'moveLeft':\n      case 'moveRight':\n        if (!isNOU(item)) {\n          this.refreshItemVisibility(item);\n        }\n\n        break;\n\n      case 'openPopup':\n        e.preventDefault();\n\n        if (!isNOU(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n          this.popObj.show(this.show);\n        }\n\n        break;\n\n      case 'delete':\n        if (this.showCloseButton === true && !isNOU(trgParent)) {\n          var nxtSib = trgParent.nextSibling;\n\n          if (!isNOU(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n            nxtSib.firstElementChild.focus();\n          }\n\n          this.removeTab(this.getEleIndex(trgParent));\n        }\n\n        this.setActiveBorder();\n        break;\n    }\n  };\n  /**\n   * Refresh the active tab border\n   *\n   * @returns {void}\n   * @private\n   */\n\n\n  Tab.prototype.refreshActiveTabBorder = function () {\n    var activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n\n    if (!isNOU(activeEle) && this.reorderActiveTab) {\n      this.select(this.getEleIndex(activeEle));\n    }\n\n    this.refreshActiveBorder();\n  };\n\n  Tab.prototype.refreshItemVisibility = function (target) {\n    var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n\n    if (!this.isVertical() && !isNOU(scrCnt)) {\n      var scrBar = select('.e-hscroll-bar', this.tbItems);\n      var scrStart = scrBar.scrollLeft;\n      var scrEnd = scrStart + scrBar.offsetWidth;\n      var eleStart = target.offsetLeft;\n      var eleWidth = target.offsetWidth;\n      var eleEnd = target.offsetLeft + target.offsetWidth;\n\n      if (scrStart < eleStart && scrEnd < eleEnd) {\n        var eleViewRange = scrEnd - eleStart;\n        scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n      } else {\n        if (scrStart > eleStart && scrEnd > eleEnd) {\n          var eleViewRange = eleEnd - scrStart;\n          scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n        }\n      }\n    } else {\n      return;\n    }\n  };\n\n  Tab.prototype.hoverHandler = function (e) {\n    var trg = e.target;\n\n    if (!isNOU(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n      trg.setAttribute('title', new L10n('tab', {\n        closeButtonTitle: this.title\n      }, this.locale).getConstant('closeButtonTitle'));\n    }\n  };\n\n  Tab.prototype.evalOnPropertyChangeItems = function (newProp, oldProp) {\n    if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n      var changedProp = Object.keys(newProp.items);\n\n      for (var i = 0; i < changedProp.length; i++) {\n        var index = parseInt(Object.keys(newProp.items)[i], 10);\n        var properties = Object.keys(newProp.items[index]);\n\n        for (var j = 0; j < properties.length; j++) {\n          var oldVal = Object(oldProp.items[index])[properties[j]];\n          var newVal = Object(newProp.items[index])[properties[j]];\n          var hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\n          var itemIndex = void 0;\n\n          if (hdr && !isNOU(hdr.id) && hdr.id !== '') {\n            var num = hdr.id.lastIndexOf('_');\n            itemIndex = parseInt(hdr.id.substring(num + 1), 10);\n          } else {\n            itemIndex = index;\n          }\n\n          var hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM + this.tabId + '_' + itemIndex, this.element);\n          var cntItem = select('.' + CLS_CONTENT + ' #' + CLS_CONTENT + this.tabId + '_' + itemIndex, this.element);\n\n          if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\n            var icon = isNOU(this.items[index].header) || isNOU(this.items[index].header.iconCss) ? '' : this.items[index].header.iconCss;\n            var textVal = this.items[index].headerTemplate || this.items[index].header.text;\n\n            if (textVal === '' && icon === '') {\n              this.removeTab(index);\n            } else {\n              this.tbId = hdr.id;\n              var arr = [];\n              arr.push(this.items[index]);\n              this.items.splice(index, 1);\n              this.itemIndexArray.splice(index, 1);\n              this.tbObj.items.splice(index, 1);\n              var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);\n              detach(hdrItem);\n              this.isReplace = true;\n              this.addTab(arr, index);\n\n              if (isHiddenEle) {\n                this.hideTab(index);\n              }\n\n              this.isReplace = false;\n            }\n          }\n\n          if (properties[j] === 'content' && !isNOU(cntItem)) {\n            var strVal = typeof newVal === 'string' || isNOU(newVal.innerHTML);\n\n            if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n              var eleVal = document.querySelector(newVal);\n              cntItem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else if (newVal === '' && oldVal[0] === '#') {\n              document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n              cntItem.innerHTML = newVal;\n            } else if (this.isReact) {\n              cntItem.innerHTML = '';\n              this.templateCompile(cntItem, newVal, index);\n            } else if (typeof newVal !== 'function') {\n              cntItem.innerHTML = newVal;\n            }\n          }\n\n          if (properties[j] === 'cssClass') {\n            if (!isNOU(hdrItem)) {\n              hdrItem.classList.remove(oldVal);\n              hdrItem.classList.add(newVal);\n            }\n\n            if (!isNOU(cntItem)) {\n              cntItem.classList.remove(oldVal);\n              cntItem.classList.add(newVal);\n            }\n          }\n\n          if (properties[j] === 'disabled') {\n            this.enableTab(index, newVal === true ? false : true);\n          }\n\n          if (properties[j] === 'visible') {\n            this.hideTab(index, newVal === true ? false : true);\n          }\n        }\n      }\n    } else {\n      this.lastIndex = 0;\n\n      if (isNOU(this.tbObj)) {\n        this.reRenderItems();\n      } else {\n        if (this.isReact || this.isAngular) {\n          this.clearTemplate();\n        }\n\n        this.setItems(newProp.items);\n\n        if (this.templateEle.length > 0) {\n          this.expTemplateContent();\n        }\n\n        this.templateEle = [];\n        var selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n\n        while (selectElement.firstElementChild) {\n          detach(selectElement.firstElementChild);\n        }\n\n        this.select(this.selectedItem);\n        this.draggableItems = [];\n        this.bindDraggable();\n      }\n    }\n  };\n\n  Tab.prototype.initializeDrag = function (target) {\n    var _this = this;\n\n    var dragObj = new Draggable(target, {\n      dragArea: this.dragArea,\n      dragTarget: '.' + CLS_TB_ITEM,\n      clone: true,\n      helper: this.helper.bind(this),\n      dragStart: this.itemDragStart.bind(this),\n      drag: function (e) {\n        var dragIndex = _this.getEleIndex(_this.dragItem);\n\n        var dropIndex;\n        var dropItem;\n        var dragArgs = {\n          draggedItem: _this.dragItem,\n          event: e.event,\n          target: e.target,\n          droppedItem: e.target.closest('.' + CLS_TB_ITEM),\n          clonedElement: _this.cloneElement,\n          index: dragIndex\n        };\n\n        if (!isNOU(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(_this.element) && _this.dragArea !== '.' + CLS_HEADER) {\n          _this.trigger('dragging', dragArgs);\n        } else {\n          if (!e.target.closest(_this.dragArea) && _this.overflowMode !== 'Popup') {\n            document.body.style.cursor = 'not-allowed';\n            addClass([_this.cloneElement], CLS_HIDDEN);\n\n            if (_this.dragItem.classList.contains(CLS_HIDDEN)) {\n              removeClass([_this.dragItem], CLS_HIDDEN);\n            }\n\n            _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n          } else {\n            document.body.style.cursor = '';\n            _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n\n            if (_this.cloneElement.classList.contains(CLS_HIDDEN)) {\n              removeClass([_this.cloneElement], CLS_HIDDEN);\n            }\n          }\n\n          if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n            var scrollRightNavEle = _this.element.querySelector('.e-scroll-right-nav');\n\n            var scrollLeftNavEle = _this.element.querySelector('.e-scroll-left-nav');\n\n            var hscrollBar = _this.element.querySelector('.e-hscroll-bar');\n\n            if (!isNOU(scrollRightNavEle) && Math.abs(scrollRightNavEle.offsetWidth / 2 + scrollRightNavEle.offsetLeft) > _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n              hscrollBar.scrollLeft -= 10;\n            }\n\n            if (!isNOU(scrollLeftNavEle) && Math.abs(scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth - _this.cloneElement.offsetLeft) > scrollLeftNavEle.offsetWidth / 2) {\n              hscrollBar.scrollLeft += 10;\n            }\n          }\n\n          _this.cloneElement.style.pointerEvents = 'none';\n          dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\n          var scrollContentWidth = 0;\n\n          if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n            scrollContentWidth = _this.element.querySelector('.e-hscroll-content').offsetWidth;\n          }\n\n          if (dropItem != null && !dropItem.isSameNode(_this.dragItem) && dropItem.closest('.' + CLS_TAB).isSameNode(_this.dragItem.closest('.' + CLS_TAB))) {\n            dropIndex = _this.getEleIndex(dropItem);\n\n            if (dropIndex < dragIndex && Math.abs(dropItem.offsetLeft + dropItem.offsetWidth - _this.cloneElement.offsetLeft) > dropItem.offsetWidth / 2) {\n              _this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n\n            if (dropIndex > dragIndex && Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft - scrollContentWidth < _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n              _this.dragAction(dropItem, dragIndex, dropIndex);\n            }\n          }\n\n          _this.droppedIndex = _this.getEleIndex(_this.dragItem);\n\n          _this.trigger('dragging', dragArgs);\n        }\n      },\n      dragStop: this.itemDragStop.bind(this)\n    });\n    this.draggableItems.push(dragObj);\n  };\n\n  Tab.prototype.helper = function (e) {\n    this.cloneElement = this.createElement('div');\n\n    if (e.element) {\n      this.cloneElement = e.element.cloneNode(true);\n      addClass([this.cloneElement], 'e-tab-clone-element');\n\n      if (this.element.querySelector('.' + CLS_HEADER).classList.contains(CLS_CLOSE_SHOW)) {\n        addClass([this.cloneElement], CLS_CLOSE_SHOW);\n      }\n\n      removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\n\n      if (!isNOU(this.cloneElement.querySelector('.e-ripple-element'))) {\n        remove(this.cloneElement.querySelector('.e-ripple-element'));\n      }\n\n      document.body.appendChild(this.cloneElement);\n    }\n\n    return this.cloneElement;\n  };\n\n  Tab.prototype.itemDragStart = function (e) {\n    var _this = this;\n\n    this.draggingItems = this.items.map(function (x) {\n      return x;\n    });\n    this.dragItem = e.element;\n    var dragArgs = {\n      draggedItem: e.element,\n      event: e.event,\n      target: e.target,\n      droppedItem: null,\n      index: this.getEleIndex(this.dragItem),\n      clonedElement: this.cloneElement,\n      cancel: false\n    };\n    this.trigger('onDragStart', dragArgs, function (tabitemDragArgs) {\n      if (tabitemDragArgs.cancel) {\n        detach(_this.cloneElement);\n      } else {\n        _this.removeActiveClass();\n\n        addClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n      }\n    });\n  };\n\n  Tab.prototype.dragAction = function (dropItem, dragsIndex, dropIndex) {\n    if (this.items.length > 0) {\n      var item = this.draggingItems[dragsIndex];\n      this.draggingItems.splice(dragsIndex, 1);\n      this.draggingItems.splice(dropIndex, 0, item);\n    }\n\n    if (this.overflowMode === 'MultiRow') {\n      dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n    }\n\n    if (dragsIndex > dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\n            var popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        } else {\n          var lastEle = dropItem.parentElement.lastChild;\n\n          if (dropItem.isSameNode(lastEle)) {\n            var popupContainer = this.dragItem.parentNode;\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n            popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\n          } else {\n            this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n          }\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\n      }\n    }\n\n    if (dragsIndex < dropIndex) {\n      if (!this.dragItem.parentElement.isSameNode(dropItem.parentElement)) {\n        if (this.overflowMode === 'Extended') {\n          this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\n        } else {\n          this.dragItem.parentNode.insertBefore(dropItem.parentElement.lastChild, this.dragItem.parentElement.childNodes[0]);\n          dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n        }\n      } else {\n        this.dragItem.parentNode.insertBefore(dropItem, this.dragItem);\n      }\n    }\n  };\n\n  Tab.prototype.itemDragStop = function (e) {\n    var _this = this;\n\n    detach(this.cloneElement);\n    this.cloneElement = null;\n    this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n    document.body.style.cursor = '';\n    var dragStopArgs = {\n      draggedItem: this.dragItem,\n      event: e.event,\n      target: e.target,\n      droppedItem: this.tbItem[this.droppedIndex],\n      clonedElement: null,\n      index: this.droppedIndex,\n      cancel: false\n    };\n    this.trigger('dragged', dragStopArgs, function (tabItemDropArgs) {\n      if (tabItemDropArgs.cancel) {\n        _this.refresh();\n      } else {\n        if (_this.items.length > 0 && _this.draggingItems.length > 0) {\n          _this.items = _this.draggingItems;\n          _this.selectedItem = _this.droppedIndex;\n\n          _this.refresh();\n        } else {\n          _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\n          removeClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n\n          _this.selectTab(_this.droppedIndex, null, true);\n        }\n      }\n    });\n    this.dragItem = null;\n  };\n  /**\n   * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\n   *\n   * @param {number} index - Index value of target Tab item.\n   * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\n   * By default, isEnable is true.\n   * @returns {void}.\n   */\n\n\n  Tab.prototype.enableTab = function (index, value) {\n    var tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(tbItems)) {\n      return;\n    }\n\n    if (value === true) {\n      tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);\n      tbItems.firstElementChild.setAttribute('tabindex', '-1');\n    } else {\n      tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);\n      tbItems.firstElementChild.removeAttribute('tabindex');\n\n      if (tbItems.classList.contains(CLS_ACTIVE)) {\n        this.select(index + 1);\n      }\n    }\n\n    if (!isNOU(this.items[index])) {\n      this.items[index].disabled = !value;\n      this.dataBind();\n    }\n\n    tbItems.setAttribute('aria-disabled', value === true ? 'false' : 'true');\n  };\n  /**\n   * Adds new items to the Tab that accepts an array as Tab items.\n   *\n   * @param {TabItemModel[]} items - An array of item that is added to the Tab.\n   * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\n   * @returns {void}.\n   */\n\n\n  Tab.prototype.addTab = function (items, index) {\n    var _this = this;\n\n    var addArgs = {\n      addedItems: items,\n      cancel: false\n    };\n\n    if (!this.isReplace) {\n      this.trigger('adding', addArgs, function (tabAddingArgs) {\n        if (!tabAddingArgs.cancel) {\n          _this.addingTabContent(items, index);\n        }\n      });\n    } else {\n      this.addingTabContent(items, index);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  Tab.prototype.addingTabContent = function (items, index) {\n    var _this = this;\n\n    var lastEleIndex = 0;\n    this.hdrEle = select('.' + CLS_HEADER, this.element);\n\n    if (isNOU(this.hdrEle)) {\n      this.items = items;\n      this.reRenderItems();\n      this.bindDraggable();\n    } else {\n      var itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n\n      if (itemsCount !== 0) {\n        lastEleIndex = this.lastIndex + 1;\n      }\n\n      if (isNOU(index)) {\n        index = itemsCount - 1;\n      }\n\n      if (itemsCount < index || index < 0 || isNaN(index)) {\n        return;\n      }\n\n      if (itemsCount === 0 && !isNOU(this.hdrEle)) {\n        this.hdrEle.style.display = '';\n      }\n\n      if (!isNOU(this.bdrLine)) {\n        this.bdrLine.classList.add(CLS_HIDDEN);\n      }\n\n      this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n      this.isAdd = true;\n      var tabItems = this.parseObject(items, index);\n      this.isAdd = false;\n      var i_1 = 0;\n      var textValue_1;\n      items.forEach(function (item, place) {\n        textValue_1 = item.headerTemplate || item.header.text;\n\n        if (!(isNOU(item.headerTemplate || item.header) || isNOU(textValue_1) || textValue_1.length === 0 && !isNOU(item.header) && isNOU(item.header.iconCss))) {\n          _this.items.splice(index + i_1, 0, item);\n\n          i_1++;\n        }\n\n        if (_this.isTemplate && !isNOU(item.header) && !isNOU(item.header.text)) {\n          var no = lastEleIndex + place;\n\n          var ele = _this.createElement('div', {\n            id: CLS_CONTENT + _this.tabId + '_' + no,\n            className: CLS_ITEM,\n            attrs: {\n              role: 'tabpanel',\n              'aria-labelledby': CLS_ITEM + '_' + no\n            }\n          });\n\n          _this.cntEle.insertBefore(ele, _this.cntEle.children[index + place]);\n\n          var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());\n\n          _this.getContent(eleTrg, item.content, 'render', index);\n        }\n      });\n      this.tbObj.addItems(tabItems, index);\n\n      if (!this.isReplace) {\n        this.trigger('added', {\n          addedItems: items\n        });\n      }\n\n      if (this.selectedItem === index) {\n        this.select(index);\n      } else {\n        this.setActiveBorder();\n      }\n\n      this.bindDraggable();\n    }\n  };\n  /**\n   * Removes the items in the Tab from the specified index.\n   *\n   * @param {number} index - Index of target item that is going to be removed.\n   * @returns {void}.\n   */\n\n\n  Tab.prototype.removeTab = function (index) {\n    var _this = this;\n\n    var trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(trg)) {\n      return;\n    }\n\n    var removeArgs = {\n      removedItem: trg,\n      removedIndex: index,\n      cancel: false\n    };\n    this.trigger('removing', removeArgs, function (tabRemovingArgs) {\n      if (!tabRemovingArgs.cancel) {\n        _this.tbObj.removeItems(index);\n\n        if (_this.allowDragAndDrop && index !== Array.prototype.indexOf.call(_this.itemIndexArray, trg.id)) {\n          index = Array.prototype.indexOf.call(_this.itemIndexArray, trg.id);\n        }\n\n        _this.items.splice(index, 1);\n\n        _this.itemIndexArray.splice(index, 1);\n\n        _this.refreshActiveBorder();\n\n        var cntTrg = select('#' + CLS_CONTENT + _this.tabId + '_' + _this.extIndex(trg.id), select('.' + CLS_CONTENT, _this.element));\n\n        if (!isNOU(cntTrg)) {\n          detach(cntTrg);\n        }\n\n        _this.trigger('removed', tabRemovingArgs);\n\n        if (_this.draggableItems && _this.draggableItems.length > 0) {\n          _this.draggableItems[index].destroy();\n\n          _this.draggableItems[index] = null;\n\n          _this.draggableItems.splice(index, 1);\n        }\n\n        if (trg.classList.contains(CLS_ACTIVE)) {\n          index = index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', _this.element).length - 1 ? index - 1 : index;\n          _this.enableAnimation = false;\n          _this.selectedItem = index;\n\n          _this.select(index);\n        } else if (index !== _this.selectedItem) {\n          if (index < _this.selectedItem) {\n            index = _this.itemIndexArray.indexOf(_this.tbItem[_this.selectedItem].id);\n\n            _this.setProperties({\n              selectedItem: index > -1 ? index : _this.selectedItem\n            }, true);\n\n            _this.prevIndex = _this.selectedItem;\n          }\n\n          _this.tbItem = selectAll('.' + CLS_TB_ITEM, _this.getTabHeader());\n        }\n\n        if (selectAll('.' + CLS_TB_ITEM, _this.element).length === 0) {\n          _this.hdrEle.style.display = 'none';\n        }\n\n        _this.enableAnimation = true;\n      }\n    });\n  };\n  /**\n   * Shows or hides the Tab that is in the specified index.\n   *\n   * @param {number} index - Index value of target item.\n   * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\n   * @returns {void}.\n   */\n\n\n  Tab.prototype.hideTab = function (index, value) {\n    var items;\n    var item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n\n    if (isNOU(item)) {\n      return;\n    }\n\n    if (isNOU(value)) {\n      value = true;\n    }\n\n    this.bdrLine.classList.add(CLS_HIDDEN);\n\n    if (value === true) {\n      item.classList.add(CLS_HIDDEN);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n\n      if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {\n        if (index !== 0) {\n          for (var i = index - 1; i >= 0; i--) {\n            if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n              this.select(i);\n              break;\n            } else if (i === 0) {\n              for (var k = index + 1; k < this.tbItem.length; k++) {\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n                  this.select(k);\n                  break;\n                }\n              }\n            }\n          }\n        } else {\n          for (var k = index + 1; k < this.tbItem.length; k++) {\n            if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n              this.select(k);\n              break;\n            }\n          }\n        }\n      } else if (items.length === 0) {\n        this.element.classList.add(CLS_HIDDEN);\n      }\n    } else {\n      this.element.classList.remove(CLS_HIDDEN);\n      items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n      item.classList.remove(CLS_HIDDEN);\n\n      if (items.length === 0) {\n        this.select(index);\n      }\n    }\n\n    this.setActiveBorder();\n    item.setAttribute('aria-hidden', '' + value);\n\n    if (this.overflowMode === 'Popup' && this.tbObj) {\n      this.tbObj.refreshOverflow();\n    }\n  };\n\n  Tab.prototype.selectTab = function (args, event, isInteracted) {\n    if (event === void 0) {\n      event = null;\n    }\n\n    if (isInteracted === void 0) {\n      isInteracted = false;\n    }\n\n    this.isInteracted = isInteracted;\n    this.select(args, event);\n  };\n  /**\n   * Specifies the index or HTMLElement to select an item from the Tab.\n   *\n   * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\n   * @param {Event} event - An event which takes place in DOM.\n   * @returns {void}\n   */\n\n\n  Tab.prototype.select = function (args, event) {\n    var _this = this;\n\n    var tabHeader = this.getTabHeader();\n    this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\n    this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\n    this.content = select('.' + CLS_CONTENT, this.element);\n    this.prevItem = this.tbItem[this.prevIndex];\n\n    if (isNOU(this.selectedItem) || this.selectedItem < 0 || this.tbItem.length <= this.selectedItem || isNaN(this.selectedItem)) {\n      this.selectedItem = 0;\n    } else {\n      this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\n    }\n\n    var trg = this.tbItem[args];\n\n    if (isNOU(trg)) {\n      this.selectedID = '0';\n    } else {\n      this.selectingID = this.extIndex(trg.id);\n    }\n\n    if (!isNOU(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {\n      this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n    }\n\n    var eventArg = {\n      event: event,\n      previousItem: this.prevItem,\n      previousIndex: this.prevIndex,\n      selectedItem: this.tbItem[this.selectedItem],\n      selectedIndex: this.selectedItem,\n      selectedContent: !isNOU(this.content) ? select('#' + CLS_CONTENT + this.tabId + '_' + this.selectedID, this.content) : null,\n      selectingItem: trg,\n      selectingIndex: args,\n      selectingContent: !isNOU(this.content) ? select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content) : null,\n      isSwiped: this.isSwipeed,\n      isInteracted: this.isInteracted,\n      cancel: false\n    };\n\n    if (!this.initRender) {\n      this.trigger('selecting', eventArg, function (selectArgs) {\n        if (!selectArgs.cancel) {\n          _this.selectingContent(args, _this.isInteracted);\n        }\n      });\n    } else {\n      this.selectingContent(args, this.isInteracted);\n    }\n\n    this.isInteracted = false;\n  };\n\n  Tab.prototype.selectingContent = function (args, isInteracted) {\n    if (typeof args === 'number') {\n      if (!isNOU(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE) || this.tbItem[args].classList.contains(CLS_HIDDEN))) {\n        for (var i = args + 1; i < this.items.length; i++) {\n          if (this.items[i].disabled === false && this.items[i].visible === true) {\n            args = i;\n            break;\n          } else {\n            args = 0;\n          }\n        }\n      }\n\n      if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n        this.prevIndex = this.selectedItem;\n        this.prevItem = this.tbItem[this.prevIndex];\n\n        if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\n          this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\n\n          if (!isNOU(this.items) && this.items.length > 0 && this.allowDragAndDrop) {\n            this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n            var item = this.items[args];\n            this.items.splice(args, 1);\n            this.items.splice(this.tbItem.length - 1, 0, item);\n          }\n        } else {\n          this.setActive(args, null, isInteracted);\n        }\n      } else {\n        this.setActive(0, null, isInteracted);\n      }\n    } else if (args instanceof HTMLElement) {\n      this.setActive(this.getEleIndex(args), null, isInteracted);\n    }\n  };\n  /**\n   * Gets the item index from the Tab.\n   *\n   * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\n   * @returns {number} - It returns item index.\n   */\n\n\n  Tab.prototype.getItemIndex = function (tabItemId) {\n    var tabIndex;\n\n    for (var i = 0; i < this.tbItem.length; i++) {\n      var value = this.tbItem[i].getAttribute('data-id');\n\n      if (tabItemId === value) {\n        tabIndex = i;\n        break;\n      }\n    }\n\n    return tabIndex;\n  };\n  /**\n   * Specifies the value to disable/enable the Tab component.\n   * When set to `true`, the component will be disabled.\n   *\n   * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\n   * @returns {void}.\n   */\n\n\n  Tab.prototype.disable = function (value) {\n    this.setCssClass(this.element, CLS_DISABLE, value);\n    this.element.setAttribute('aria-disabled', '' + value);\n  };\n  /**\n   * Get the properties to be maintained in the persisted state.\n   *\n   * @returns {string} - It returns the persisted state.\n   */\n\n\n  Tab.prototype.getPersistData = function () {\n    return this.addOnPersist(['selectedItem', 'actEleId']);\n  };\n  /**\n   * Returns the current module name.\n   *\n   * @returns {string} - It returns the current module name.\n   * @private\n   */\n\n\n  Tab.prototype.getModuleName = function () {\n    return 'tab';\n  };\n  /**\n   * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n   *\n   * @param  {TabModel} newProp - It contains the new value of data.\n   * @param  {TabModel} oldProp - It contains the old value of data.\n   * @returns {void}\n   * @private\n   */\n\n\n  Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      switch (prop) {\n        case 'width':\n          setStyle(this.element, {\n            width: formatUnit(newProp.width)\n          });\n          break;\n\n        case 'height':\n          setStyle(this.element, {\n            height: formatUnit(newProp.height)\n          });\n          this.setContentHeight(false);\n          break;\n\n        case 'cssClass':\n          if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\n            this.setCssClass(this.element, oldProp.cssClass, false);\n            this.setCssClass(this.element, newProp.cssClass, true);\n          } else {\n            this.setCssClass(this.element, newProp.cssClass, true);\n          }\n\n          break;\n\n        case 'items':\n          this.evalOnPropertyChangeItems(newProp, oldProp);\n          break;\n\n        case 'showCloseButton':\n          this.setCloseButton(newProp.showCloseButton);\n          break;\n\n        case 'reorderActiveTab':\n          this.refreshActiveTabBorder();\n          break;\n\n        case 'selectedItem':\n          this.selectedItem = oldProp.selectedItem;\n          this.select(newProp.selectedItem);\n          break;\n\n        case 'headerPlacement':\n          this.changeOrientation(newProp.headerPlacement);\n          break;\n\n        case 'enableRtl':\n          this.setRTL(newProp.enableRtl);\n          break;\n\n        case 'overflowMode':\n          this.tbObj.overflowMode = newProp.overflowMode;\n          this.tbObj.dataBind();\n          this.refreshActiveTabBorder();\n          break;\n\n        case 'heightAdjustMode':\n          this.setContentHeight(false);\n          this.select(this.selectedItem);\n          break;\n\n        case 'scrollStep':\n          if (this.tbObj) {\n            this.tbObj.scrollStep = this.scrollStep;\n          }\n\n          break;\n\n        case 'allowDragAndDrop':\n          this.bindDraggable();\n          break;\n\n        case 'dragArea':\n          if (this.allowDragAndDrop) {\n            this.draggableItems.forEach(function (item) {\n              item.dragArea = _this.dragArea;\n            });\n            this.refresh();\n          }\n\n          break;\n      }\n    }\n  };\n\n  Tab.prototype.refreshActiveTab = function () {\n    if (this.isReact) {\n      this.clearTemplate();\n    }\n\n    if (!this.isTemplate) {\n      if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE)) {\n        detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).children[0]);\n        detach(this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0]);\n        var item = this.items[this.selectedItem];\n        var pos = isNOU(item.header) || isNOU(item.header.iconPosition) ? '' : item.header.iconPosition;\n        var css = isNOU(item.header) || isNOU(item.header.iconCss) ? '' : item.header.iconCss;\n        var text = item.headerTemplate || item.header.text;\n        var txtWrap = this.createElement('div', {\n          className: CLS_TEXT,\n          attrs: {\n            'role': 'presentation'\n          }\n        });\n\n        if (!isNOU(text.tagName)) {\n          txtWrap.appendChild(text);\n        } else {\n          this.headerTextCompile(txtWrap, text, this.selectedItem);\n        }\n\n        var tEle = void 0;\n        var icon = this.createElement('span', {\n          className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n        });\n        var tConts = this.createElement('div', {\n          className: CLS_TEXT_WRAP\n        });\n        tConts.appendChild(txtWrap);\n\n        if (text !== '' && text !== undefined && css !== '') {\n          if (pos === 'left' || pos === 'top') {\n            tConts.insertBefore(icon, tConts.firstElementChild);\n          } else {\n            tConts.appendChild(icon);\n          }\n\n          tEle = txtWrap;\n          this.isIconAlone = false;\n        } else {\n          tEle = css === '' ? txtWrap : icon;\n\n          if (tEle === icon) {\n            detach(txtWrap);\n            tConts.appendChild(icon);\n            this.isIconAlone = true;\n          }\n        }\n\n        var wrapAtt = item.disabled ? {} : {\n          tabIndex: '-1'\n        };\n        tConts.appendChild(this.btnCls.cloneNode(true));\n        var wraper = this.createElement('div', {\n          className: CLS_WRAP,\n          attrs: wrapAtt\n        });\n        wraper.appendChild(tConts);\n\n        if (pos === 'top' || pos === 'bottom') {\n          this.element.classList.add('e-vertical-icon');\n        }\n\n        this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wraper);\n        var crElem = this.createElement('div');\n        var cnt = item.content;\n        var eleStr = void 0;\n\n        if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n          if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n            cnt = SanitizeHtmlHelper.sanitize(cnt);\n          }\n\n          if (cnt[0] === '.' || cnt[0] === '#') {\n            if (document.querySelectorAll(cnt).length) {\n              var eleVal = document.querySelector(cnt);\n              eleStr = eleVal.outerHTML.trim();\n              crElem.appendChild(eleVal);\n              eleVal.style.display = '';\n            } else {\n              this.compileElement(crElem, cnt, 'content', this.selectedItem);\n            }\n          } else {\n            this.compileElement(crElem, cnt, 'content', this.selectedItem);\n          }\n        } else {\n          crElem.appendChild(cnt);\n        }\n\n        if (!isNOU(eleStr)) {\n          if (this.templateEle.indexOf(cnt.toString()) === -1) {\n            this.templateEle.push(cnt.toString());\n          }\n        }\n\n        this.element.querySelector('.' + CLS_ITEM + '.' + CLS_ACTIVE).appendChild(crElem);\n      }\n    } else {\n      var tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\n      var element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE);\n      var id = element.id;\n      var num = id.indexOf('_');\n      var index = parseInt(id.substring(num + 1), 10);\n      var header = element.innerText;\n      var detachContent = this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0];\n      var mainContents = detachContent.innerHTML;\n      detach(element);\n      detach(detachContent);\n      var attr = {\n        className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE + ' ' + CLS_ACTIVE,\n        id: CLS_ITEM + this.tabId + '_' + index,\n        attrs: {\n          role: 'tab',\n          'aria-controls': CLS_CONTENT + this.tabId + '_' + index,\n          'aria-disabled': 'false',\n          'aria-selected': 'true'\n        }\n      };\n      var txtString = this.createElement('span', {\n        className: CLS_TEXT,\n        innerHTML: header,\n        attrs: {\n          'role': 'presentation'\n        }\n      }).outerHTML;\n      var conte = this.createElement('div', {\n        className: CLS_TEXT_WRAP,\n        innerHTML: txtString + this.btnCls.outerHTML\n      }).outerHTML;\n      var wrap = this.createElement('div', {\n        className: CLS_WRAP,\n        innerHTML: conte,\n        attrs: {\n          tabIndex: '-1'\n        }\n      });\n      tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\n      this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wrap);\n      var crElem = this.createElement('div', {\n        innerHTML: mainContents\n      });\n      this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).appendChild(crElem);\n    }\n\n    if (this.isReact) {\n      this.renderReactTemplates();\n    }\n  };\n\n  __decorate([Collection([], TabItem)], Tab.prototype, \"items\", void 0);\n\n  __decorate([Property('100%')], Tab.prototype, \"width\", void 0);\n\n  __decorate([Property('auto')], Tab.prototype, \"height\", void 0);\n\n  __decorate([Property('')], Tab.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(0)], Tab.prototype, \"selectedItem\", void 0);\n\n  __decorate([Property('Top')], Tab.prototype, \"headerPlacement\", void 0);\n\n  __decorate([Property('Content')], Tab.prototype, \"heightAdjustMode\", void 0);\n\n  __decorate([Property('Scrollable')], Tab.prototype, \"overflowMode\", void 0);\n\n  __decorate([Property('Dynamic')], Tab.prototype, \"loadOn\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"enableHtmlSanitizer\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"showCloseButton\", void 0);\n\n  __decorate([Property(true)], Tab.prototype, \"reorderActiveTab\", void 0);\n\n  __decorate([Property()], Tab.prototype, \"scrollStep\", void 0);\n\n  __decorate([Property()], Tab.prototype, \"dragArea\", void 0);\n\n  __decorate([Property(false)], Tab.prototype, \"allowDragAndDrop\", void 0);\n\n  __decorate([Complex({}, TabAnimationSettings)], Tab.prototype, \"animation\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"created\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"adding\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"added\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"selecting\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"selected\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"removing\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"removed\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"onDragStart\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"dragging\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"dragged\", void 0);\n\n  __decorate([Event()], Tab.prototype, \"destroyed\", void 0);\n\n  Tab = __decorate([NotifyPropertyChanges], Tab);\n  return Tab;\n}(Component);\n\nexport { Tab };","map":{"version":3,"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Property","Event","closest","Collection","Complex","attributes","detach","isNullOrUndefined","NotifyPropertyChanges","ChildProperty","select","isVisible","KeyboardEvents","Browser","formatUnit","L10n","setStyleAttribute","setStyle","isNOU","selectAll","addClass","removeClass","remove","EventHandler","rippleEffect","Touch","compile","Animation","getRandomId","SanitizeHtmlHelper","Draggable","Toolbar","CLS_TAB","CLS_HEADER","CLS_BLA_TEM","CLS_CONTENT","CLS_NEST","CLS_ITEMS","CLS_ITEM","CLS_TEMPLATE","CLS_RTL","CLS_ACTIVE","CLS_DISABLE","CLS_HIDDEN","CLS_FOCUS","CLS_ICONS","CLS_ICON","CLS_ICON_TAB","CLS_ICON_CLOSE","CLS_CLOSE_SHOW","CLS_TEXT","CLS_INDICATOR","CLS_WRAP","CLS_TEXT_WRAP","CLS_TAB_ICON","CLS_TB_ITEMS","CLS_TB_ITEM","CLS_TB_POP","CLS_TB_POPUP","CLS_HOR_NAV","CLS_POPUP_OPEN","CLS_POPUP_CLOSE","CLS_PROGRESS","CLS_IGNORE","CLS_OVERLAY","CLS_HSCRCNT","CLS_VSCRCNT","CLS_VTAB","CLS_VERTICAL","CLS_VLEFT","CLS_VRIGHT","CLS_HBOTTOM","CLS_FILL","TABITEMPREFIX","CLS_REORDER_ACTIVE_ITEM","TabActionSettings","_super","apply","TabAnimationSettings","effect","duration","easing","Header","TabItem","Tab","options","element","_this","call","show","hide","maxHeight","title","isInteracted","lastIndex","isAdd","isIconAlone","draggableItems","resizeContext","refreshActiveTabBorder","bind","keyConfigs","tab","home","end","enter","space","delete","moveLeft","moveRight","moveUp","moveDown","destroy","isReact","isAngular","clearTemplate","tbObj","unWireEvents","forEach","val","removeAttribute","expTemplateContent","isTemplate","firstElementChild","cntEle","classList","innerHTML","cnt","btnCls","hdrEle","tbItems","tbItem","tbPop","prevItem","popEle","bdrLine","content","dragItem","cloneElement","draggingItems","trigger","refresh","renderReactTemplates","preRender","nested","prevIndex","isNested","isPopup","initRender","isSwipeed","itemIndexArray","templateEle","allowDragAndDrop","dragArea","id","parentElement","add","name","info","css","width","height","setCssClass","cssClass","role","updatePopAnimationConfig","render","createElement","className","attrs","tabId","renderContainer","wireEvents","ele","items","item","index","setProperties","toString","children","appendChild","setOrientation","headerPlacement","header","querySelector","renderHeader","selector","renderContent","scrCnt","scrCntClass","insertBefore","firstChild","setContentHeight","selectedItem","tabID","setAttribute","setRTL","enableRtl","serverItemsChanged","enableAnimation","setActive","loadOn","itemCollection","slice","content_1","contains","triggerAnimation","headerReady","getTabHeader","ej2_instances","clicked","clickHandler","on","scrollCnt","touchModule","swipe","swipeHandler","setActiveContent","renderComplete","getTrgContent","extIndex","hdrPlace","tabItems","addVerticalClass","parseObject","count","hdrItems","push","tabItems_1","attr","txt","outerHTML","cont","wrap","tabIndex","overflowMode","scrollStep","enableHtmlSanitizer","isStringTemplate","appendTo","updateOrientationAttribute","setCloseButton","showCloseButton","hdrItem","contents","reRenderItems","maxId","isReplace","idList_1","parseInt","indexOf","Math","max","tItems","txtWrapEle","spliceArray","pos","iconPosition","iconCss","headerTemplate","text","sanitize","itemIndex","tbId","num","substring","disabled","hidden","visible","tHtml","txtEmpty","tagName","headerTextCompile","tEle","icon","tCont","undefined","wrapAttrs","cloneNode","splice","attrObj","tItem","htmlAttributes","template","spliceItemIndex","removeActiveClass","tabHeader","node","checkPopupOverflow","popIcon","tbrItems","lastChild","isOverflow","isVertical","offsetLeft","offsetWidth","offsetTop","offsetHeight","popupHandler","ripEle","actEleId","prevEle","previousElementSibling","trg","refreshOverflow","prevCtnAnimation","prev","current","animation","checkRTL","previous","timingFunction","next","triggerPrevAnimation","oldCnt","animateObj","begin","style","display","childNodes","animate","value","prevActiveEle","newCnt","idNo","openEff","clsEff","progress","setActiveBorder","keyPressed","trgParent","trgIndex","getEleIndex","popObj","click","selectTab","headers","filter","e","replace","eleStr","document","body","templateCompile","tempEle","compileElement","prop","templateFn","trim","isVue","templateFUN","el","getContent","callType","querySelectorAll","eleVal","no","findEle","tbPos","changeOrientation","place","activeTab","changeToolbarOrientation","focusItem","curActItem","focus","headerPos","contentPos","cls","list","split","heightAdjustMode","getHeight","removeProperty","removeChild","cs","window","getComputedStyle","parseFloat","getPropertyValue","trgHdrEle","reorderActiveTab","root","bar","tbHeight","bar_1","tbWidth","skipDataBind","isNaN","allowServerDataBinding","serverDataBind","Number","trg_1","eleTrg","refreshItemVisibility","eventArg","previousItem","previousIndex","selectedIndex","selectedContent","selectingID","isSwiped","contentReady","setItems","dataBind","refreshActiveBorder","showPopup","config","tbPopObj","position","X","bindDraggable","initializeDrag","addEventListener","hoverHandler","spaceKeyDown","keyModule","keyAction","keyHandler","tabKeyModule","openPopup","shiftTab","eventName","removeEventListener","args","originalEvent","removeTab","velocity","changedTouches","nestedTab","swipeDirection","k","keyCode","which","clstHead","preventDefault","actEle","activeElement","action","nxtSib","nextSibling","activeEle","scrBar","scrStart","scrollLeft","scrEnd","eleStart","eleWidth","eleEnd","eleViewRange","closeButtonTitle","locale","getConstant","evalOnPropertyChangeItems","newProp","oldProp","changedProp","keys","properties","j","oldVal","newVal","hdr","lastIndexOf","cntItem","textVal","arr","isHiddenEle","addTab","hideTab","strVal","enableTab","selectElement","dragObj","dragTarget","clone","helper","dragStart","itemDragStart","drag","dragIndex","dropIndex","dropItem","dragArgs","draggedItem","event","droppedItem","clonedElement","isEqualNode","cursor","visibility","scrollRightNavEle","scrollLeftNavEle","hscrollBar","abs","pointerEvents","scrollContentWidth","isSameNode","dragAction","droppedIndex","dragStop","itemDragStop","map","x","cancel","tabitemDragArgs","dragsIndex","parentNode","nextElementSibling","popupContainer","lastEle","dragStopArgs","tabItemDropArgs","addArgs","addedItems","tabAddingArgs","addingTabContent","lastEleIndex","itemsCount","i_1","textValue_1","addItems","removeArgs","removedItem","removedIndex","tabRemovingArgs","removeItems","cntTrg","selectedID","selectingItem","selectingIndex","selectingContent","selectArgs","HTMLElement","getItemIndex","tabItemId","getAttribute","disable","getPersistData","addOnPersist","getModuleName","onPropertyChanged","_i","_a","refreshActiveTab","txtWrap","tConts","wrapAtt","wraper","crElem","innerText","detachContent","mainContents","txtString","conte"],"sources":["C:/Users/cpelea/OneDrive - ENDAVA/Desktop/test/node_modules/@syncfusion/ej2-navigations/src/tab/tab.js"],"sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Property, Event, closest, Collection, Complex, attributes, detach, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { NotifyPropertyChanges, ChildProperty, select, isVisible } from '@syncfusion/ej2-base';\nimport { KeyboardEvents, Browser, formatUnit, L10n } from '@syncfusion/ej2-base';\nimport { setStyleAttribute as setStyle, isNullOrUndefined as isNOU, selectAll, addClass, removeClass, remove } from '@syncfusion/ej2-base';\nimport { EventHandler, rippleEffect, Touch, compile, Animation } from '@syncfusion/ej2-base';\nimport { getRandomId, SanitizeHtmlHelper, Draggable } from '@syncfusion/ej2-base';\nimport { Toolbar } from '../toolbar/toolbar';\nvar CLS_TAB = 'e-tab';\nvar CLS_HEADER = 'e-tab-header';\nvar CLS_BLA_TEM = 'blazor-template';\nvar CLS_CONTENT = 'e-content';\nvar CLS_NEST = 'e-nested';\nvar CLS_ITEMS = 'e-items';\nvar CLS_ITEM = 'e-item';\nvar CLS_TEMPLATE = 'e-template';\nvar CLS_RTL = 'e-rtl';\nvar CLS_ACTIVE = 'e-active';\nvar CLS_DISABLE = 'e-disable';\nvar CLS_HIDDEN = 'e-hidden';\nvar CLS_FOCUS = 'e-focused';\nvar CLS_ICONS = 'e-icons';\nvar CLS_ICON = 'e-icon';\nvar CLS_ICON_TAB = 'e-icon-tab';\nvar CLS_ICON_CLOSE = 'e-close-icon';\nvar CLS_CLOSE_SHOW = 'e-close-show';\nvar CLS_TEXT = 'e-tab-text';\nvar CLS_INDICATOR = 'e-indicator';\nvar CLS_WRAP = 'e-tab-wrap';\nvar CLS_TEXT_WRAP = 'e-text-wrap';\nvar CLS_TAB_ICON = 'e-tab-icon';\nvar CLS_TB_ITEMS = 'e-toolbar-items';\nvar CLS_TB_ITEM = 'e-toolbar-item';\nvar CLS_TB_POP = 'e-toolbar-pop';\nvar CLS_TB_POPUP = 'e-toolbar-popup';\nvar CLS_HOR_NAV = 'e-hor-nav';\nvar CLS_POPUP_OPEN = 'e-popup-open';\nvar CLS_POPUP_CLOSE = 'e-popup-close';\nvar CLS_PROGRESS = 'e-progress';\nvar CLS_IGNORE = 'e-ignore';\nvar CLS_OVERLAY = 'e-overlay';\nvar CLS_HSCRCNT = 'e-hscroll-content';\nvar CLS_VSCRCNT = 'e-vscroll-content';\nvar CLS_VTAB = 'e-vertical-tab';\nvar CLS_VERTICAL = 'e-vertical';\nvar CLS_VLEFT = 'e-vertical-left';\nvar CLS_VRIGHT = 'e-vertical-right';\nvar CLS_HBOTTOM = 'e-horizontal-bottom';\nvar CLS_FILL = 'e-fill-mode';\nvar TABITEMPREFIX = 'tabitem_';\nvar CLS_REORDER_ACTIVE_ITEM = 'e-reorder-active-item';\n/**\n * Objects used for configuring the Tab selecting item action properties.\n */\nvar TabActionSettings = /** @class */ (function (_super) {\n    __extends(TabActionSettings, _super);\n    function TabActionSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('SlideLeftIn')\n    ], TabActionSettings.prototype, \"effect\", void 0);\n    __decorate([\n        Property(600)\n    ], TabActionSettings.prototype, \"duration\", void 0);\n    __decorate([\n        Property('ease')\n    ], TabActionSettings.prototype, \"easing\", void 0);\n    return TabActionSettings;\n}(ChildProperty));\nexport { TabActionSettings };\n/**\n * Objects used for configuring the Tab animation properties.\n */\nvar TabAnimationSettings = /** @class */ (function (_super) {\n    __extends(TabAnimationSettings, _super);\n    function TabAnimationSettings() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({ effect: 'SlideLeftIn', duration: 600, easing: 'ease' }, TabActionSettings)\n    ], TabAnimationSettings.prototype, \"previous\", void 0);\n    __decorate([\n        Complex({ effect: 'SlideRightIn', duration: 600, easing: 'ease' }, TabActionSettings)\n    ], TabAnimationSettings.prototype, \"next\", void 0);\n    return TabAnimationSettings;\n}(ChildProperty));\nexport { TabAnimationSettings };\n/**\n * Objects used for configuring the Tab item header properties.\n */\nvar Header = /** @class */ (function (_super) {\n    __extends(Header, _super);\n    function Header() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Property('')\n    ], Header.prototype, \"text\", void 0);\n    __decorate([\n        Property('')\n    ], Header.prototype, \"iconCss\", void 0);\n    __decorate([\n        Property('left')\n    ], Header.prototype, \"iconPosition\", void 0);\n    return Header;\n}(ChildProperty));\nexport { Header };\n/**\n * An array of object that is used to configure the Tab.\n */\nvar TabItem = /** @class */ (function (_super) {\n    __extends(TabItem, _super);\n    function TabItem() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        Complex({}, Header)\n    ], TabItem.prototype, \"header\", void 0);\n    __decorate([\n        Property(null)\n    ], TabItem.prototype, \"headerTemplate\", void 0);\n    __decorate([\n        Property('')\n    ], TabItem.prototype, \"content\", void 0);\n    __decorate([\n        Property('')\n    ], TabItem.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], TabItem.prototype, \"disabled\", void 0);\n    __decorate([\n        Property(true)\n    ], TabItem.prototype, \"visible\", void 0);\n    __decorate([\n        Property()\n    ], TabItem.prototype, \"id\", void 0);\n    return TabItem;\n}(ChildProperty));\nexport { TabItem };\n/**\n * Tab is a content panel to show multiple contents in a single space, one at a time.\n * Each Tab item has an associated content, that will be displayed based on the active Tab header item.\n * ```html\n * <div id=\"tab\"></div>\n * <script>\n *   var tabObj = new Tab();\n *   tab.appendTo(\"#tab\");\n * </script>\n * ```\n */\nvar Tab = /** @class */ (function (_super) {\n    __extends(Tab, _super);\n    /**\n     * Initializes a new instance of the Tab class.\n     *\n     * @param {TabModel} options  - Specifies Tab model properties as options.\n     * @param {string | HTMLElement} element  - Specifies the element that is rendered as a Tab.\n     */\n    function Tab(options, element) {\n        var _this = _super.call(this, options, element) || this;\n        _this.show = {};\n        _this.hide = {};\n        _this.maxHeight = 0;\n        _this.title = 'Close';\n        _this.isInteracted = false;\n        _this.lastIndex = 0;\n        _this.isAdd = false;\n        _this.isIconAlone = false;\n        _this.draggableItems = [];\n        _this.resizeContext = _this.refreshActiveTabBorder.bind(_this);\n        /**\n         * Contains the keyboard configuration of the Tab.\n         */\n        _this.keyConfigs = {\n            tab: 'tab',\n            home: 'home',\n            end: 'end',\n            enter: 'enter',\n            space: 'space',\n            delete: 'delete',\n            moveLeft: 'leftarrow',\n            moveRight: 'rightarrow',\n            moveUp: 'uparrow',\n            moveDown: 'downarrow'\n        };\n        return _this;\n    }\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers, attributes and classes.\n     *\n     * @returns {void}\n     */\n    Tab.prototype.destroy = function () {\n        var _this = this;\n        if (this.isReact || this.isAngular) {\n            this.clearTemplate();\n        }\n        if (!isNOU(this.tbObj)) {\n            this.tbObj.destroy();\n            this.tbObj = null;\n        }\n        this.unWireEvents();\n        ['role', 'aria-disabled', 'aria-activedescendant', 'tabindex', 'aria-orientation'].forEach(function (val) {\n            _this.element.removeAttribute(val);\n        });\n        this.expTemplateContent();\n        if (!this.isTemplate) {\n            while (this.element.firstElementChild) {\n                remove(this.element.firstElementChild);\n            }\n        }\n        else {\n            var cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n            this.element.classList.remove(CLS_TEMPLATE);\n            if (!isNOU(cntEle)) {\n                cntEle.innerHTML = this.cnt;\n            }\n        }\n        if (this.btnCls) {\n            this.btnCls = null;\n        }\n        this.hdrEle = null;\n        this.cntEle = null;\n        this.tbItems = null;\n        this.tbItem = null;\n        this.tbPop = null;\n        this.prevItem = null;\n        this.popEle = null;\n        this.bdrLine = null;\n        this.content = null;\n        this.dragItem = null;\n        this.cloneElement = null;\n        this.draggingItems = [];\n        if (this.draggableItems && this.draggableItems.length > 0) {\n            for (var i = 0; i < this.draggableItems.length; i++) {\n                this.draggableItems[i].destroy();\n                this.draggableItems[i] = null;\n            }\n            this.draggableItems = [];\n        }\n        _super.prototype.destroy.call(this);\n        this.trigger('destroyed');\n    };\n    /**\n     * Refresh the tab component\n     *\n     * @returns {void}\n     */\n    Tab.prototype.refresh = function () {\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        _super.prototype.refresh.call(this);\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    /**\n     * Initialize component\n     *\n     * @private\n     * @returns {void}\n     */\n    Tab.prototype.preRender = function () {\n        var nested = closest(this.element, '.' + CLS_CONTENT);\n        this.prevIndex = 0;\n        this.isNested = false;\n        this.isPopup = false;\n        this.initRender = true;\n        this.isSwipeed = false;\n        this.itemIndexArray = [];\n        this.templateEle = [];\n        if (this.allowDragAndDrop) {\n            this.dragArea = !isNOU(this.dragArea) ? this.dragArea : '#' + this.element.id + ' ' + ('.' + CLS_HEADER);\n        }\n        if (!isNOU(nested)) {\n            nested.parentElement.classList.add(CLS_NEST);\n            this.isNested = true;\n        }\n        var name = Browser.info.name;\n        var css = (name === 'msie') ? 'e-ie' : (name === 'edge') ? 'e-edge' : (name === 'safari') ? 'e-safari' : '';\n        setStyle(this.element, { 'width': formatUnit(this.width), 'height': formatUnit(this.height) });\n        this.setCssClass(this.element, this.cssClass, true);\n        attributes(this.element, { role: 'tablist', 'aria-disabled': 'false', 'aria-activedescendant': '' });\n        this.setCssClass(this.element, css, true);\n        this.updatePopAnimationConfig();\n    };\n    /**\n     * Initialize the component rendering\n     *\n     * @private\n     * @returns {void}\n     */\n    Tab.prototype.render = function () {\n        this.btnCls = this.createElement('span', { className: CLS_ICONS + ' ' + CLS_ICON_CLOSE, attrs: { title: this.title } });\n        this.tabId = this.element.id.length > 0 ? ('-' + this.element.id) : getRandomId();\n        this.renderContainer();\n        this.wireEvents();\n        this.initRender = false;\n    };\n    Tab.prototype.renderContainer = function () {\n        var ele = this.element;\n        this.items.forEach(function (item, index) {\n            if (isNOU(item.id) && !isNOU(item.setProperties)) {\n                item.setProperties({ id: TABITEMPREFIX + index.toString() }, true);\n            }\n        });\n        if (this.items.length > 0 && ele.children.length === 0) {\n            ele.appendChild(this.createElement('div', { className: CLS_CONTENT }));\n            this.setOrientation(this.headerPlacement, this.createElement('div', { className: CLS_HEADER }));\n            this.isTemplate = false;\n        }\n        else if (this.element.children.length > 0) {\n            this.isTemplate = true;\n            ele.classList.add(CLS_TEMPLATE);\n            var header = ele.querySelector('.' + CLS_HEADER);\n            if (header && this.headerPlacement === 'Bottom') {\n                this.setOrientation(this.headerPlacement, header);\n            }\n        }\n        if (!isNOU(select('.' + CLS_HEADER, this.element)) && !isNOU(select('.' + CLS_CONTENT, this.element))) {\n            this.renderHeader();\n            this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n            if (!isNOU(this.tbItems)) {\n                rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n            }\n            this.renderContent();\n            if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n                this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n                this.bdrLine = this.createElement('div', { className: CLS_INDICATOR + ' ' + CLS_HIDDEN + ' ' + CLS_IGNORE });\n                var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n                if (!isNOU(scrCnt)) {\n                    scrCnt.insertBefore(this.bdrLine, scrCnt.firstChild);\n                }\n                else {\n                    this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstChild);\n                }\n                this.setContentHeight(true);\n                this.select(this.selectedItem);\n            }\n            if (!isNOU(this.tbItem)) {\n                for (var i = 0; i < this.items.length; i++) {\n                    var tabID = this.items[i].id;\n                    this.tbItem[i].setAttribute('data-id', tabID);\n                }\n            }\n            this.setRTL(this.enableRtl);\n        }\n    };\n    Tab.prototype.serverItemsChanged = function () {\n        this.enableAnimation = false;\n        this.setActive(this.selectedItem, true);\n        if (this.loadOn !== 'Dynamic' && !isNOU(this.cntEle)) {\n            var itemCollection = [].slice.call(this.cntEle.children);\n            var content_1 = CLS_CONTENT + this.tabId + '_' + this.selectedItem;\n            itemCollection.forEach(function (item) {\n                if (item.classList.contains(CLS_ACTIVE) && item.id !== content_1) {\n                    item.classList.remove(CLS_ACTIVE);\n                }\n                if (item.id === content_1) {\n                    item.classList.add(CLS_ACTIVE);\n                }\n            });\n            this.prevIndex = this.selectedItem;\n            this.triggerAnimation(CLS_ITEM + this.tabId + '_' + this.selectedItem, false);\n        }\n        this.enableAnimation = true;\n    };\n    Tab.prototype.headerReady = function () {\n        this.initRender = true;\n        this.hdrEle = this.getTabHeader();\n        this.setOrientation(this.headerPlacement, this.hdrEle);\n        if (!isNOU(this.hdrEle)) {\n            this.tbObj = (this.hdrEle && this.hdrEle.ej2_instances[0]);\n        }\n        this.tbObj.clicked = this.clickHandler.bind(this);\n        this.tbObj.on('onItemsChanged', this.serverItemsChanged.bind(this));\n        this.tbItems = select('.' + CLS_HEADER + ' .' + CLS_TB_ITEMS, this.element);\n        if (!isNOU(this.tbItems)) {\n            rippleEffect(this.tbItems, { selector: '.e-tab-wrap' });\n        }\n        if (selectAll('.' + CLS_TB_ITEM, this.element).length > 0) {\n            this.bdrLine = select('.' + CLS_INDICATOR + '.' + CLS_IGNORE, this.element);\n            var scrollCnt = select('.' + this.scrCntClass, this.tbItems);\n            if (!isNOU(scrollCnt)) {\n                scrollCnt.insertBefore(this.bdrLine, scrollCnt.firstElementChild);\n            }\n            else {\n                this.tbItems.insertBefore(this.bdrLine, this.tbItems.firstElementChild);\n            }\n            this.select(this.selectedItem);\n        }\n        this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n        if (!isNOU(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n        if (this.loadOn === 'Demand') {\n            var id = this.setActiveContent();\n            this.triggerAnimation(id, false);\n        }\n        this.initRender = false;\n        this.renderComplete();\n    };\n    Tab.prototype.setActiveContent = function () {\n        var id = CLS_ITEM + this.tabId + '_' + this.selectedItem;\n        var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n        if (!isNOU(item)) {\n            item.classList.add(CLS_ACTIVE);\n        }\n        return id;\n    };\n    Tab.prototype.renderHeader = function () {\n        var _this = this;\n        var hdrPlace = this.headerPlacement;\n        var tabItems = [];\n        this.hdrEle = this.getTabHeader();\n        this.addVerticalClass();\n        if (!this.isTemplate) {\n            tabItems = this.parseObject(this.items, 0);\n        }\n        else {\n            if (this.element.children.length > 1 && this.element.children[1].classList.contains(CLS_HEADER)) {\n                this.setProperties({ headerPlacement: 'Bottom' }, true);\n            }\n            var count = this.hdrEle.children.length;\n            var hdrItems = [];\n            for (var i = 0; i < count; i++) {\n                hdrItems.push(this.hdrEle.children.item(i).innerHTML);\n            }\n            if (count > 0) {\n                while (this.hdrEle.firstElementChild) {\n                    detach(this.hdrEle.firstElementChild);\n                }\n                var tabItems_1 = this.createElement('div', { className: CLS_ITEMS });\n                this.hdrEle.appendChild(tabItems_1);\n                hdrItems.forEach(function (item, index) {\n                    _this.lastIndex = index;\n                    var attr = {\n                        className: CLS_ITEM, id: CLS_ITEM + _this.tabId + '_' + index,\n                        attrs: { role: 'tab', 'aria-controls': CLS_CONTENT + _this.tabId + '_' + index, 'aria-selected': 'false' }\n                    };\n                    var txt = _this.createElement('span', {\n                        className: CLS_TEXT, innerHTML: item, attrs: { 'role': 'presentation' }\n                    }).outerHTML;\n                    var cont = _this.createElement('div', {\n                        className: CLS_TEXT_WRAP, innerHTML: txt + _this.btnCls.outerHTML\n                    }).outerHTML;\n                    var wrap = _this.createElement('div', { className: CLS_WRAP, innerHTML: cont, attrs: { tabIndex: '-1' } });\n                    tabItems_1.appendChild(_this.createElement('div', attr));\n                    selectAll('.' + CLS_ITEM, tabItems_1)[index].appendChild(wrap);\n                });\n            }\n        }\n        this.tbObj = new Toolbar({\n            width: (hdrPlace === 'Left' || hdrPlace === 'Right') ? 'auto' : '100%',\n            height: (hdrPlace === 'Left' || hdrPlace === 'Right') ? '100%' : 'auto',\n            overflowMode: this.overflowMode,\n            items: (tabItems.length !== 0) ? tabItems : [],\n            clicked: this.clickHandler.bind(this),\n            scrollStep: this.scrollStep,\n            enableHtmlSanitizer: this.enableHtmlSanitizer\n        });\n        this.tbObj.isStringTemplate = true;\n        this.tbObj.createElement = this.createElement;\n        this.tbObj.appendTo(this.hdrEle);\n        attributes(this.hdrEle, { 'aria-label': 'tab-header' });\n        this.updateOrientationAttribute();\n        this.setCloseButton(this.showCloseButton);\n    };\n    Tab.prototype.renderContent = function () {\n        this.cntEle = select('.' + CLS_CONTENT, this.element);\n        var hdrItem = selectAll('.' + CLS_TB_ITEM, this.element);\n        if (this.isTemplate) {\n            this.cnt = (this.cntEle.children.length > 0) ? this.cntEle.innerHTML : '';\n            var contents = this.cntEle.children;\n            for (var i = 0; i < hdrItem.length; i++) {\n                if (contents.length - 1 >= i) {\n                    addClass([contents.item(i)], CLS_ITEM);\n                    attributes(contents.item(i), { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + i });\n                    contents.item(i).id = CLS_CONTENT + this.tabId + '_' + i;\n                }\n            }\n        }\n    };\n    Tab.prototype.reRenderItems = function () {\n        this.renderContainer();\n        if (!isNOU(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n    };\n    Tab.prototype.parseObject = function (items, index) {\n        var _this = this;\n        var tbItems = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element);\n        var maxId = this.lastIndex;\n        if (!this.isReplace && tbItems.length > 0) {\n            var idList_1 = [];\n            tbItems.forEach(function (item) {\n                idList_1.push(parseInt(item.id.slice(item.id.indexOf('_') + 1), 10));\n            });\n            maxId = Math.max.apply(Math, idList_1);\n        }\n        var tItems = [];\n        var txtWrapEle;\n        var spliceArray = [];\n        var i = 0;\n        items.forEach(function (item, i) {\n            var pos = (isNOU(item.header) || isNOU(item.header.iconPosition)) ? '' : item.header.iconPosition;\n            var css = (isNOU(item.header) || isNOU(item.header.iconCss)) ? '' : item.header.iconCss;\n            if ((isNOU(item.headerTemplate)) && (isNOU(item.header) || isNOU(item.header.text) ||\n                ((item.header.text.length === 0)) && (css === ''))) {\n                spliceArray.push(i);\n                return;\n            }\n            var txt = item.headerTemplate || item.header.text;\n            if (typeof txt === 'string' && _this.enableHtmlSanitizer) {\n                txt = SanitizeHtmlHelper.sanitize(txt);\n            }\n            var itemIndex;\n            if (_this.isReplace && !isNOU(_this.tbId) && _this.tbId !== '') {\n                var num = (_this.tbId.indexOf('_'));\n                itemIndex = parseInt(_this.tbId.substring(num + 1), 10);\n                _this.tbId = '';\n            }\n            else {\n                itemIndex = index + i;\n            }\n            _this.lastIndex = ((tbItems.length === 0) ? i : ((_this.isReplace) ? (itemIndex) : (maxId + 1 + i)));\n            var disabled = (item.disabled) ? ' ' + CLS_DISABLE + ' ' + CLS_OVERLAY : '';\n            var hidden = (item.visible === false) ? ' ' + CLS_HIDDEN : '';\n            txtWrapEle = _this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\n            var tHtml = ((txt instanceof Object) ? txt.outerHTML : txt);\n            var txtEmpty = (!isNOU(tHtml) && tHtml !== '');\n            if (!isNOU(txt.tagName)) {\n                txtWrapEle.appendChild(txt);\n            }\n            else {\n                _this.headerTextCompile(txtWrapEle, txt, i);\n            }\n            var tEle;\n            var icon = _this.createElement('span', {\n                className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n            });\n            var tCont = _this.createElement('div', { className: CLS_TEXT_WRAP });\n            tCont.appendChild(txtWrapEle);\n            if ((txt !== '' && txt !== undefined) && css !== '') {\n                if ((pos === 'left' || pos === 'top')) {\n                    tCont.insertBefore(icon, tCont.firstElementChild);\n                }\n                else {\n                    tCont.appendChild(icon);\n                }\n                tEle = txtWrapEle;\n                _this.isIconAlone = false;\n            }\n            else {\n                tEle = ((css === '') ? txtWrapEle : icon);\n                if (tEle === icon) {\n                    detach(txtWrapEle);\n                    tCont.appendChild(icon);\n                    _this.isIconAlone = true;\n                }\n            }\n            var wrapAttrs = (item.disabled) ? {} : { tabIndex: '-1' };\n            tCont.appendChild(_this.btnCls.cloneNode(true));\n            var wrap = _this.createElement('div', { className: CLS_WRAP, attrs: wrapAttrs });\n            wrap.appendChild(tCont);\n            if (_this.itemIndexArray === []) {\n                _this.itemIndexArray.push(CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n            }\n            else {\n                _this.itemIndexArray.splice((index + i), 0, CLS_ITEM + _this.tabId + '_' + _this.lastIndex);\n            }\n            var attrObj = {\n                id: CLS_ITEM + _this.tabId + '_' + _this.lastIndex, role: 'tab', 'aria-selected': 'false'\n            };\n            var tItem = { htmlAttributes: attrObj, template: wrap };\n            tItem.cssClass = ((item.cssClass !== undefined) ? item.cssClass : ' ') + ' ' + disabled + ' ' + hidden + ' '\n                + ((css !== '') ? 'e-i' + pos : '') + ' ' + ((!txtEmpty) ? CLS_ICON : '');\n            if (pos === 'top' || pos === 'bottom') {\n                _this.element.classList.add('e-vertical-icon');\n            }\n            tItems.push(tItem);\n            i++;\n        });\n        if (!this.isAdd) {\n            spliceArray.forEach(function (spliceItemIndex) {\n                _this.items.splice(spliceItemIndex, 1);\n            });\n        }\n        if (this.isIconAlone) {\n            this.element.classList.add(CLS_ICON_TAB);\n        }\n        else {\n            this.element.classList.remove(CLS_ICON_TAB);\n        }\n        return tItems;\n    };\n    Tab.prototype.removeActiveClass = function () {\n        var tabHeader = this.getTabHeader();\n        if (tabHeader) {\n            var tabItems = selectAll('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, tabHeader);\n            [].slice.call(tabItems).forEach(function (node) { return node.classList.remove(CLS_ACTIVE); });\n        }\n    };\n    Tab.prototype.checkPopupOverflow = function (ele) {\n        this.tbPop = select('.' + CLS_TB_POP, this.element);\n        var popIcon = select('.e-hor-nav', this.element);\n        var tbrItems = select('.' + CLS_TB_ITEMS, this.element);\n        var lastChild = tbrItems.lastChild;\n        var isOverflow = false;\n        if (!this.isVertical() && ((this.enableRtl && ((popIcon.offsetLeft + popIcon.offsetWidth) > tbrItems.offsetLeft))\n            || (!this.enableRtl && popIcon.offsetLeft < tbrItems.offsetWidth))) {\n            isOverflow = true;\n        }\n        else if (this.isVertical() && (popIcon.offsetTop < lastChild.offsetTop + lastChild.offsetHeight)) {\n            isOverflow = true;\n        }\n        if (isOverflow) {\n            ele.classList.add(CLS_TB_POPUP);\n            this.tbPop.insertBefore(ele, selectAll('.' + CLS_TB_POPUP, this.tbPop)[0]);\n        }\n        return true;\n    };\n    Tab.prototype.popupHandler = function (target) {\n        var ripEle = target.querySelector('.e-ripple-element');\n        if (!isNOU(ripEle)) {\n            ripEle.outerHTML = '';\n            target.querySelector('.' + CLS_WRAP).classList.remove('e-ripple');\n        }\n        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n        var lastChild = this.tbItem[this.tbItem.length - 1];\n        if (this.tbItem.length !== 0) {\n            target.classList.remove(CLS_TB_POPUP);\n            target.removeAttribute('style');\n            this.tbItems.appendChild(target);\n            this.actEleId = target.id;\n            if (this.checkPopupOverflow(lastChild)) {\n                var prevEle = this.tbItems.lastChild.previousElementSibling;\n                this.checkPopupOverflow(prevEle);\n            }\n            this.isPopup = true;\n        }\n        return selectAll('.' + CLS_TB_ITEM, this.tbItems).length - 1;\n    };\n    Tab.prototype.updateOrientationAttribute = function () {\n        attributes(this.element, { 'aria-orientation': (this.isVertical() ? 'vertical' : 'horizontal') });\n    };\n    Tab.prototype.setCloseButton = function (val) {\n        var trg = select('.' + CLS_HEADER, this.element);\n        if (val === true) {\n            trg.classList.add(CLS_CLOSE_SHOW);\n        }\n        else {\n            trg.classList.remove(CLS_CLOSE_SHOW);\n        }\n        this.tbObj.refreshOverflow();\n        this.refreshActiveTabBorder();\n    };\n    Tab.prototype.prevCtnAnimation = function (prev, current) {\n        var animation;\n        var checkRTL = this.enableRtl || this.element.classList.contains(CLS_RTL);\n        if (this.isPopup || prev <= current) {\n            if (this.animation.previous.effect === 'SlideLeftIn') {\n                animation = {\n                    name: 'SlideLeftOut',\n                    duration: this.animation.previous.duration, timingFunction: this.animation.previous.easing\n                };\n            }\n            else {\n                animation = null;\n            }\n        }\n        else {\n            if (this.animation.next.effect === 'SlideRightIn') {\n                animation = {\n                    name: 'SlideRightOut',\n                    duration: this.animation.next.duration, timingFunction: this.animation.next.easing\n                };\n            }\n            else {\n                animation = null;\n            }\n        }\n        return animation;\n    };\n    Tab.prototype.triggerPrevAnimation = function (oldCnt, prevIndex) {\n        var _this = this;\n        var animateObj = this.prevCtnAnimation(prevIndex, this.selectedItem);\n        if (!isNOU(animateObj)) {\n            animateObj.begin = function () {\n                setStyle(oldCnt, { 'position': 'absolute' });\n                oldCnt.classList.add(CLS_PROGRESS);\n                oldCnt.classList.add('e-view');\n            };\n            animateObj.end = function () {\n                oldCnt.style.display = 'none';\n                oldCnt.classList.remove(CLS_ACTIVE);\n                oldCnt.classList.remove(CLS_PROGRESS);\n                oldCnt.classList.remove('e-view');\n                setStyle(oldCnt, { 'display': '', 'position': '' });\n                if (oldCnt.childNodes.length === 0 && !_this.isTemplate) {\n                    detach(oldCnt);\n                }\n            };\n            new Animation(animateObj).animate(oldCnt);\n        }\n        else {\n            oldCnt.classList.remove(CLS_ACTIVE);\n        }\n    };\n    Tab.prototype.triggerAnimation = function (id, value) {\n        var _this = this;\n        var prevIndex = this.prevIndex;\n        var oldCnt;\n        var itemCollection = [].slice.call(this.element.querySelector('.' + CLS_CONTENT).children);\n        itemCollection.forEach(function (item) {\n            if (item.id === _this.prevActiveEle) {\n                oldCnt = item;\n            }\n        });\n        var prevEle = this.tbItem[prevIndex];\n        var newCnt = this.getTrgContent(this.cntEle, this.extIndex(id));\n        if (isNOU(oldCnt) && !isNOU(prevEle)) {\n            var idNo = this.extIndex(prevEle.id);\n            oldCnt = this.getTrgContent(this.cntEle, idNo);\n        }\n        if (!isNOU(newCnt)) {\n            this.prevActiveEle = newCnt.id;\n        }\n        if (this.initRender || value === false || this.animation === {} || isNOU(this.animation)) {\n            if (oldCnt && oldCnt !== newCnt) {\n                oldCnt.classList.remove(CLS_ACTIVE);\n            }\n            return;\n        }\n        var cnt = select('.' + CLS_CONTENT, this.element);\n        var animateObj;\n        if (this.prevIndex > this.selectedItem && !this.isPopup) {\n            var openEff = this.animation.previous.effect;\n            animateObj = {\n                name: ((openEff === 'None') ? '' : ((openEff !== 'SlideLeftIn') ? openEff : 'SlideLeftIn')),\n                duration: this.animation.previous.duration,\n                timingFunction: this.animation.previous.easing\n            };\n        }\n        else if (this.isPopup || this.prevIndex < this.selectedItem || this.prevIndex === this.selectedItem) {\n            var clsEff = this.animation.next.effect;\n            animateObj = {\n                name: ((clsEff === 'None') ? '' : ((clsEff !== 'SlideRightIn') ? clsEff : 'SlideRightIn')),\n                duration: this.animation.next.duration,\n                timingFunction: this.animation.next.easing\n            };\n        }\n        animateObj.progress = function () {\n            cnt.classList.add(CLS_PROGRESS);\n            _this.setActiveBorder();\n        };\n        animateObj.end = function () {\n            cnt.classList.remove(CLS_PROGRESS);\n            newCnt.classList.add(CLS_ACTIVE);\n        };\n        if (!this.initRender && !isNOU(oldCnt)) {\n            this.triggerPrevAnimation(oldCnt, prevIndex);\n        }\n        this.isPopup = false;\n        if (animateObj.name === '') {\n            newCnt.classList.add(CLS_ACTIVE);\n        }\n        else {\n            new Animation(animateObj).animate(newCnt);\n        }\n    };\n    Tab.prototype.keyPressed = function (trg) {\n        var trgParent = closest(trg, '.' + CLS_HEADER + ' .' + CLS_TB_ITEM);\n        var trgIndex = this.getEleIndex(trgParent);\n        if (!isNOU(this.popEle) && trg.classList.contains('e-hor-nav')) {\n            (this.popEle.classList.contains(CLS_POPUP_OPEN)) ? this.popObj.hide(this.hide) : this.popObj.show(this.show);\n        }\n        else if (trg.classList.contains('e-scroll-nav')) {\n            trg.click();\n        }\n        else {\n            if (!isNOU(trgParent) && trgParent.classList.contains(CLS_ACTIVE) === false) {\n                this.selectTab(trgIndex, null, true);\n                if (!isNOU(this.popEle)) {\n                    this.popObj.hide(this.hide);\n                }\n            }\n        }\n    };\n    Tab.prototype.getTabHeader = function () {\n        if (isNOU(this.element)) {\n            return undefined;\n        }\n        var headers = [].slice.call(this.element.children).filter(function (e) { return e.classList.contains(CLS_HEADER); });\n        if (headers.length > 0) {\n            return headers[0];\n        }\n        else {\n            var wrap = [].slice.call(this.element.children).filter(function (e) { return !e.classList.contains(CLS_BLA_TEM); })[0];\n            if (!wrap) {\n                return undefined;\n            }\n            return [].slice.call(wrap.children).filter(function (e) { return e.classList.contains(CLS_HEADER); })[0];\n        }\n    };\n    Tab.prototype.getEleIndex = function (item) {\n        return Array.prototype.indexOf.call(selectAll('.' + CLS_TB_ITEM, this.getTabHeader()), item);\n    };\n    Tab.prototype.extIndex = function (id) {\n        return id.replace(CLS_ITEM + this.tabId + '_', '');\n    };\n    Tab.prototype.expTemplateContent = function () {\n        var _this = this;\n        this.templateEle.forEach(function (eleStr) {\n            if (!isNOU(_this.element.querySelector(eleStr))) {\n                document.body.appendChild(_this.element.querySelector(eleStr)).style.display = 'none';\n            }\n        });\n    };\n    Tab.prototype.templateCompile = function (ele, cnt, index) {\n        var tempEle = this.createElement('div');\n        this.compileElement(tempEle, cnt, 'content', index);\n        if (tempEle.childNodes.length !== 0) {\n            ele.appendChild(tempEle);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Tab.prototype.compileElement = function (ele, val, prop, index) {\n        var templateFn;\n        if (typeof val === 'string') {\n            val = val.trim();\n            if (this.isVue) {\n                templateFn = compile(SanitizeHtmlHelper.sanitize(val));\n            }\n            else {\n                ele.innerHTML = SanitizeHtmlHelper.sanitize(val);\n            }\n        }\n        else {\n            templateFn = compile(val);\n        }\n        var templateFUN;\n        if (!isNOU(templateFn)) {\n            templateFUN = templateFn({}, this, prop);\n        }\n        if (!isNOU(templateFn) && templateFUN.length > 0) {\n            [].slice.call(templateFUN).forEach(function (el) {\n                ele.appendChild(el);\n            });\n        }\n    };\n    Tab.prototype.headerTextCompile = function (element, text, index) {\n        this.compileElement(element, text, 'headerTemplate', index);\n    };\n    Tab.prototype.getContent = function (ele, cnt, callType, index) {\n        var eleStr;\n        cnt = isNOU(cnt) ? \"\" : cnt;\n        if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n            if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n                cnt = SanitizeHtmlHelper.sanitize(cnt);\n            }\n            if (cnt[0] === '.' || cnt[0] === '#') {\n                if (document.querySelectorAll(cnt).length) {\n                    var eleVal = document.querySelector(cnt);\n                    eleStr = eleVal.outerHTML.trim();\n                    if (callType === 'clone') {\n                        ele.appendChild(eleVal.cloneNode(true));\n                    }\n                    else {\n                        ele.appendChild(eleVal);\n                        eleVal.style.display = '';\n                    }\n                }\n                else {\n                    this.templateCompile(ele, cnt, index);\n                }\n            }\n            else {\n                this.templateCompile(ele, cnt, index);\n            }\n        }\n        else {\n            ele.appendChild(cnt);\n        }\n        if (!isNOU(eleStr)) {\n            if (this.templateEle.indexOf(cnt.toString()) === -1) {\n                this.templateEle.push(cnt.toString());\n            }\n        }\n    };\n    Tab.prototype.getTrgContent = function (cntEle, no) {\n        var ele;\n        if (this.element.classList.contains(CLS_NEST)) {\n            ele = select('.' + CLS_NEST + '> .' + CLS_CONTENT + ' > #' + CLS_CONTENT + this.tabId + '_' + no, this.element);\n        }\n        else {\n            ele = this.findEle(cntEle.children, CLS_CONTENT + this.tabId + '_' + no);\n        }\n        return ele;\n    };\n    Tab.prototype.findEle = function (items, key) {\n        var ele;\n        for (var i = 0; i < items.length; i++) {\n            if (items[i].id === key) {\n                ele = items[i];\n                break;\n            }\n        }\n        return ele;\n    };\n    Tab.prototype.isVertical = function () {\n        var isVertical = (this.headerPlacement === 'Left' || this.headerPlacement === 'Right') ? true : false;\n        this.scrCntClass = (isVertical) ? CLS_VSCRCNT : CLS_HSCRCNT;\n        return isVertical;\n    };\n    Tab.prototype.addVerticalClass = function () {\n        if (this.isVertical()) {\n            var tbPos = (this.headerPlacement === 'Left') ? CLS_VLEFT : CLS_VRIGHT;\n            addClass([this.hdrEle], [CLS_VERTICAL, tbPos]);\n            if (!this.element.classList.contains(CLS_NEST)) {\n                addClass([this.element], [CLS_VTAB, tbPos]);\n            }\n            else {\n                addClass([this.hdrEle], [CLS_VTAB, tbPos]);\n            }\n        }\n        if (this.headerPlacement === 'Bottom') {\n            addClass([this.hdrEle], [CLS_HBOTTOM]);\n        }\n    };\n    Tab.prototype.updatePopAnimationConfig = function () {\n        this.show = { name: (this.isVertical() ? 'FadeIn' : 'SlideDown'), duration: 100 };\n        this.hide = { name: (this.isVertical() ? 'FadeOut' : 'SlideUp'), duration: 100 };\n    };\n    Tab.prototype.changeOrientation = function (place) {\n        this.setOrientation(place, this.hdrEle);\n        var activeTab = this.hdrEle.querySelector('.' + CLS_ACTIVE);\n        var isVertical = this.hdrEle.classList.contains(CLS_VERTICAL) ? true : false;\n        removeClass([this.element], [CLS_VTAB]);\n        removeClass([this.hdrEle], [CLS_VERTICAL, CLS_VLEFT, CLS_VRIGHT]);\n        if (isVertical !== this.isVertical()) {\n            this.changeToolbarOrientation();\n            if (!isNOU(activeTab) && activeTab.classList.contains(CLS_TB_POPUP)) {\n                this.popupHandler(activeTab);\n            }\n        }\n        this.addVerticalClass();\n        this.updateOrientationAttribute();\n        this.setActiveBorder();\n        this.focusItem();\n    };\n    Tab.prototype.focusItem = function () {\n        var curActItem = select(' #' + CLS_ITEM + this.tabId + '_' + this.selectedItem, this.hdrEle);\n        if (!isNOU(curActItem)) {\n            curActItem.firstElementChild.focus();\n        }\n    };\n    Tab.prototype.changeToolbarOrientation = function () {\n        this.tbObj.setProperties({ height: (this.isVertical() ? '100%' : 'auto'), width: (this.isVertical() ? 'auto' : '100%') }, true);\n        this.tbObj.changeOrientation();\n        this.updatePopAnimationConfig();\n    };\n    Tab.prototype.setOrientation = function (place, ele) {\n        var headerPos = Array.prototype.indexOf.call(this.element.children, ele);\n        var contentPos = Array.prototype.indexOf.call(this.element.children, this.element.querySelector('.' + CLS_CONTENT));\n        if (place === 'Bottom' && (contentPos > headerPos)) {\n            this.element.appendChild(ele);\n        }\n        else {\n            removeClass([ele], [CLS_HBOTTOM]);\n            this.element.insertBefore(ele, select('.' + CLS_CONTENT, this.element));\n        }\n    };\n    Tab.prototype.setCssClass = function (ele, cls, val) {\n        if (cls === '') {\n            return;\n        }\n        var list = cls.split(' ');\n        for (var i = 0; i < list.length; i++) {\n            if (val) {\n                ele.classList.add(list[i]);\n            }\n            else {\n                ele.classList.remove(list[i]);\n            }\n        }\n    };\n    Tab.prototype.setContentHeight = function (val) {\n        if (this.element.classList.contains(CLS_FILL)) {\n            removeClass([this.element], [CLS_FILL]);\n        }\n        if (isNOU(this.cntEle)) {\n            return;\n        }\n        var hdrEle = this.getTabHeader();\n        if (this.heightAdjustMode === 'None') {\n            if (this.height === 'auto') {\n                return;\n            }\n            else {\n                if (!this.isVertical()) {\n                    setStyle(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n                }\n            }\n        }\n        else if (this.heightAdjustMode === 'Fill') {\n            addClass([this.element], [CLS_FILL]);\n            setStyle(this.element, { 'height': '100%' });\n            setStyle(this.cntEle, { 'height': (this.element.offsetHeight - hdrEle.offsetHeight) + 'px' });\n        }\n        else if (this.heightAdjustMode === 'Auto') {\n            if (this.isTemplate === true) {\n                var cnt = selectAll('.' + CLS_CONTENT + ' > .' + CLS_ITEM, this.element);\n                for (var i = 0; i < cnt.length; i++) {\n                    cnt[i].setAttribute('style', 'display:block; visibility: visible');\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(cnt[i]));\n                    cnt[i].style.removeProperty('display');\n                    cnt[i].style.removeProperty('visibility');\n                }\n            }\n            else {\n                this.cntEle = select('.' + CLS_CONTENT, this.element);\n                if (val === true) {\n                    this.cntEle.appendChild(this.createElement('div', {\n                        id: (CLS_CONTENT + this.tabId + '_' + 0), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n                        attrs: { 'role': 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + 0 }\n                    }));\n                }\n                var ele = this.cntEle.children.item(0);\n                for (var i = 0; i < this.items.length; i++) {\n                    this.getContent(ele, this.items[i].content, 'clone', i);\n                    this.maxHeight = Math.max(this.maxHeight, this.getHeight(ele));\n                    while (ele.firstChild) {\n                        ele.removeChild(ele.firstChild);\n                    }\n                }\n                if (this.isReact) {\n                    this.clearTemplate(['content']);\n                }\n                this.templateEle = [];\n                this.getContent(ele, this.items[0].content, 'render', 0);\n                if (this.prevIndex !== this.selectedItem) {\n                    ele.classList.remove(CLS_ACTIVE);\n                }\n            }\n            setStyle(this.cntEle, { 'height': this.maxHeight + 'px' });\n        }\n        else {\n            setStyle(this.cntEle, { 'height': 'auto' });\n        }\n    };\n    Tab.prototype.getHeight = function (ele) {\n        var cs = window.getComputedStyle(ele);\n        return ele.offsetHeight + parseFloat(cs.getPropertyValue('padding-top')) + parseFloat(cs.getPropertyValue('padding-bottom')) +\n            parseFloat(cs.getPropertyValue('margin-top')) + parseFloat(cs.getPropertyValue('margin-bottom'));\n    };\n    Tab.prototype.setActiveBorder = function () {\n        var trgHdrEle = this.getTabHeader();\n        var trg = select('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE, trgHdrEle);\n        if (isNOU(trg)) {\n            return;\n        }\n        if (!this.reorderActiveTab) {\n            if (trg.classList.contains(CLS_TB_POPUP) && !this.bdrLine.classList.contains(CLS_HIDDEN)) {\n                this.bdrLine.classList.add(CLS_HIDDEN);\n            }\n            if (trgHdrEle && !trgHdrEle.classList.contains(CLS_REORDER_ACTIVE_ITEM)) {\n                trgHdrEle.classList.add(CLS_REORDER_ACTIVE_ITEM);\n            }\n        }\n        else if (trgHdrEle) {\n            trgHdrEle.classList.remove(CLS_REORDER_ACTIVE_ITEM);\n        }\n        var root = closest(trg, '.' + CLS_TAB);\n        if (this.element !== root) {\n            return;\n        }\n        this.tbItems = select('.' + CLS_TB_ITEMS, trgHdrEle);\n        var bar = select('.' + CLS_INDICATOR, trgHdrEle);\n        var scrollCnt = select('.' + CLS_TB_ITEMS + ' .' + this.scrCntClass, trgHdrEle);\n        if (this.isVertical()) {\n            setStyle(bar, { 'left': '', 'right': '' });\n            var tbHeight = (isNOU(scrollCnt)) ? this.tbItems.offsetHeight : scrollCnt.offsetHeight;\n            if (tbHeight !== 0) {\n                setStyle(bar, { 'top': trg.offsetTop + 'px', 'height': trg.offsetHeight + 'px' });\n            }\n            else {\n                setStyle(bar, { 'top': 0, 'height': 0 });\n            }\n        }\n        else {\n            if (this.overflowMode === 'MultiRow') {\n                var bar_1 = select('.' + CLS_INDICATOR, this.element);\n                setStyle(bar_1, { 'top': trg.offsetHeight + trg.offsetTop + 'px', 'height': '' });\n            }\n            else {\n                setStyle(bar, { 'top': '', 'height': '' });\n            }\n            var tbWidth = (isNOU(scrollCnt)) ? this.tbItems.offsetWidth : scrollCnt.offsetWidth;\n            if (tbWidth !== 0) {\n                setStyle(bar, { 'left': trg.offsetLeft + 'px', 'right': tbWidth - (trg.offsetLeft + trg.offsetWidth) + 'px' });\n            }\n            else {\n                setStyle(bar, { 'left': 'auto', 'right': 'auto' });\n            }\n        }\n        if (!isNOU(this.bdrLine) && !trg.classList.contains(CLS_TB_POPUP)) {\n            this.bdrLine.classList.remove(CLS_HIDDEN);\n        }\n    };\n    Tab.prototype.setActive = function (value, skipDataBind, isInteracted) {\n        if (skipDataBind === void 0) { skipDataBind = false; }\n        if (isInteracted === void 0) { isInteracted = false; }\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, this.getTabHeader());\n        var trg = this.tbItem[value];\n        if (value < 0 || isNaN(value) || this.tbItem.length === 0) {\n            return;\n        }\n        if (value >= 0 && !skipDataBind) {\n            this.allowServerDataBinding = false;\n            this.setProperties({ selectedItem: value }, true);\n            this.allowServerDataBinding = true;\n            if (!this.initRender) {\n                this.serverDataBind();\n            }\n        }\n        if (trg.classList.contains(CLS_ACTIVE)) {\n            this.setActiveBorder();\n            return;\n        }\n        if (!this.isTemplate) {\n            var prev = this.tbItem[this.prevIndex];\n            if (!isNOU(prev)) {\n                prev.removeAttribute('aria-controls');\n            }\n            attributes(trg, { 'aria-controls': CLS_CONTENT + this.tabId + '_' + value });\n        }\n        var id = trg.id;\n        this.removeActiveClass();\n        trg.classList.add(CLS_ACTIVE);\n        this.tbItem[this.prevIndex].setAttribute('aria-selected', 'false');\n        trg.setAttribute('aria-selected', 'true');\n        var no = Number(this.extIndex(id));\n        if (isNOU(this.prevActiveEle)) {\n            this.prevActiveEle = CLS_CONTENT + this.tabId + '_' + no;\n        }\n        attributes(this.element, { 'aria-activedescendant': id });\n        if (this.isTemplate) {\n            if (select('.' + CLS_CONTENT, this.element).children.length > 0) {\n                var trg_1 = this.findEle(select('.' + CLS_CONTENT, this.element).children, CLS_CONTENT + this.tabId + '_' + no);\n                if (!isNOU(trg_1)) {\n                    trg_1.classList.add(CLS_ACTIVE);\n                }\n                this.triggerAnimation(id, this.enableAnimation);\n            }\n        }\n        else {\n            this.cntEle = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n            var item = this.getTrgContent(this.cntEle, this.extIndex(id));\n            if (isNOU(item)) {\n                this.cntEle.appendChild(this.createElement('div', {\n                    id: CLS_CONTENT + this.tabId + '_' + this.extIndex(id), className: CLS_ITEM + ' ' + CLS_ACTIVE,\n                    attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + this.tabId + '_' + this.extIndex(id) }\n                }));\n                var eleTrg = this.getTrgContent(this.cntEle, this.extIndex(id));\n                var itemIndex = Array.prototype.indexOf.call(this.itemIndexArray, id);\n                this.getContent(eleTrg, this.items[itemIndex].content, 'render', itemIndex);\n            }\n            else {\n                item.classList.add(CLS_ACTIVE);\n            }\n            this.triggerAnimation(id, this.enableAnimation);\n        }\n        this.setActiveBorder();\n        this.refreshItemVisibility(trg);\n        if (!this.initRender && !skipDataBind) {\n            trg.firstElementChild.focus();\n            var eventArg = {\n                previousItem: this.prevItem,\n                previousIndex: this.prevIndex,\n                selectedItem: trg,\n                selectedIndex: value,\n                selectedContent: select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content),\n                isSwiped: this.isSwipeed,\n                isInteracted: isInteracted\n            };\n            this.trigger('selected', eventArg);\n        }\n    };\n    Tab.prototype.contentReady = function () {\n        var id = this.setActiveContent();\n        this.triggerAnimation(id, this.enableAnimation);\n    };\n    Tab.prototype.setItems = function (items) {\n        this.isReplace = true;\n        this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n        this.tbObj.items = this.parseObject(items, 0);\n        this.tbObj.dataBind();\n        this.isReplace = false;\n    };\n    Tab.prototype.setRTL = function (value) {\n        this.tbObj.enableRtl = value;\n        this.tbObj.dataBind();\n        this.setCssClass(this.element, CLS_RTL, value);\n        this.refreshActiveBorder();\n    };\n    Tab.prototype.refreshActiveBorder = function () {\n        if (!isNOU(this.bdrLine)) {\n            this.bdrLine.classList.add(CLS_HIDDEN);\n        }\n        this.setActiveBorder();\n    };\n    Tab.prototype.showPopup = function (config) {\n        var tbPop = select('.e-popup.e-toolbar-pop', this.hdrEle);\n        if (tbPop.classList.contains('e-popup-close')) {\n            var tbPopObj = (tbPop && tbPop.ej2_instances[0]);\n            tbPopObj.position.X = (this.headerPlacement === 'Left') ? 'left' : 'right';\n            tbPopObj.dataBind();\n            tbPopObj.show(config);\n        }\n    };\n    Tab.prototype.bindDraggable = function () {\n        var _this = this;\n        if (this.allowDragAndDrop) {\n            var tabHeader = this.element.querySelector('.' + CLS_HEADER);\n            if (tabHeader) {\n                var items = tabHeader.querySelectorAll('.' + CLS_TB_ITEM);\n                items.forEach(function (element) {\n                    _this.initializeDrag(element);\n                });\n            }\n        }\n    };\n    Tab.prototype.wireEvents = function () {\n        this.bindDraggable();\n        window.addEventListener('resize', this.resizeContext);\n        EventHandler.add(this.element, 'mouseover', this.hoverHandler, this);\n        EventHandler.add(this.element, 'keydown', this.spaceKeyDown, this);\n        if (!isNOU(this.cntEle)) {\n            this.touchModule = new Touch(this.cntEle, { swipe: this.swipeHandler.bind(this) });\n        }\n        this.keyModule = new KeyboardEvents(this.element, { keyAction: this.keyHandler.bind(this), keyConfigs: this.keyConfigs });\n        this.tabKeyModule = new KeyboardEvents(this.element, {\n            keyAction: this.keyHandler.bind(this),\n            keyConfigs: { openPopup: 'shift+f10', tab: 'tab', shiftTab: 'shift+tab' },\n            eventName: 'keydown'\n        });\n    };\n    Tab.prototype.unWireEvents = function () {\n        if (!isNOU(this.keyModule)) {\n            this.keyModule.destroy();\n        }\n        if (!isNOU(this.tabKeyModule)) {\n            this.tabKeyModule.destroy();\n        }\n        if (!isNOU(this.cntEle) && !isNOU(this.touchModule)) {\n            this.touchModule.destroy();\n            this.touchModule = null;\n        }\n        window.removeEventListener('resize', this.resizeContext);\n        EventHandler.remove(this.element, 'mouseover', this.hoverHandler);\n        EventHandler.remove(this.element, 'keydown', this.spaceKeyDown);\n        this.element.classList.remove(CLS_RTL);\n        this.element.classList.remove(CLS_FOCUS);\n    };\n    Tab.prototype.clickHandler = function (args) {\n        this.element.classList.remove(CLS_FOCUS);\n        var trg = args.originalEvent.target;\n        var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n        var trgIndex = this.getEleIndex(trgParent);\n        if (trg.classList.contains(CLS_ICON_CLOSE)) {\n            this.removeTab(trgIndex);\n        }\n        else if (this.isVertical() && closest(trg, '.' + CLS_HOR_NAV)) {\n            this.showPopup(this.show);\n        }\n        else {\n            this.isPopup = false;\n            if (!isNOU(trgParent) && (trgIndex !== this.selectedItem || trgIndex !== this.prevIndex)) {\n                this.selectTab(trgIndex, args.originalEvent, true);\n            }\n        }\n    };\n    Tab.prototype.swipeHandler = function (e) {\n        if (e.velocity < 3 && isNOU(e.originalEvent.changedTouches)) {\n            return;\n        }\n        if (this.isNested) {\n            this.element.setAttribute('data-swipe', 'true');\n        }\n        var nestedTab = this.element.querySelector('[data-swipe=\"true\"]');\n        if (nestedTab) {\n            nestedTab.removeAttribute('data-swipe');\n            return;\n        }\n        this.isSwipeed = true;\n        if (e.swipeDirection === 'Right' && this.selectedItem !== 0) {\n            for (var k = this.selectedItem - 1; k >= 0; k--) {\n                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n                    this.selectTab(k, null, true);\n                    break;\n                }\n            }\n        }\n        else if (e.swipeDirection === 'Left' && (this.selectedItem !== selectAll('.' + CLS_TB_ITEM, this.element).length - 1)) {\n            for (var i = this.selectedItem + 1; i < this.tbItem.length; i++) {\n                if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n                    this.selectTab(i, null, true);\n                    break;\n                }\n            }\n        }\n        this.isSwipeed = false;\n    };\n    Tab.prototype.spaceKeyDown = function (e) {\n        if ((e.keyCode === 32 && e.which === 32) || (e.keyCode === 35 && e.which === 35)) {\n            var clstHead = closest(e.target, '.' + CLS_HEADER);\n            if (!isNOU(clstHead)) {\n                e.preventDefault();\n            }\n        }\n    };\n    Tab.prototype.keyHandler = function (e) {\n        if (this.element.classList.contains(CLS_DISABLE)) {\n            return;\n        }\n        this.element.classList.add(CLS_FOCUS);\n        var trg = e.target;\n        var tabHeader = this.getTabHeader();\n        var actEle = select('.' + CLS_ACTIVE, tabHeader);\n        this.popEle = select('.' + CLS_TB_POP, tabHeader);\n        if (!isNOU(this.popEle)) {\n            this.popObj = this.popEle.ej2_instances[0];\n        }\n        var item = closest(document.activeElement, '.' + CLS_TB_ITEM);\n        var trgParent = closest(trg, '.' + CLS_TB_ITEM);\n        switch (e.action) {\n            case 'space':\n            case 'enter':\n                if (trg.parentElement.classList.contains(CLS_DISABLE)) {\n                    return;\n                }\n                if (e.action === 'enter' && trg.classList.contains('e-hor-nav')) {\n                    this.showPopup(this.show);\n                    break;\n                }\n                this.keyPressed(trg);\n                break;\n            case 'tab':\n            case 'shiftTab':\n                if (trg.classList.contains(CLS_WRAP)\n                    && closest(trg, '.' + CLS_TB_ITEM).classList.contains(CLS_ACTIVE) === false) {\n                    trg.setAttribute('tabindex', '-1');\n                }\n                if (this.popObj && isVisible(this.popObj.element)) {\n                    this.popObj.hide(this.hide);\n                }\n                actEle.children.item(0).setAttribute('tabindex', '0');\n                break;\n            case 'moveLeft':\n            case 'moveRight':\n                if (!isNOU(item)) {\n                    this.refreshItemVisibility(item);\n                }\n                break;\n            case 'openPopup':\n                e.preventDefault();\n                if (!isNOU(this.popEle) && this.popEle.classList.contains(CLS_POPUP_CLOSE)) {\n                    this.popObj.show(this.show);\n                }\n                break;\n            case 'delete':\n                if (this.showCloseButton === true && !isNOU(trgParent)) {\n                    var nxtSib = trgParent.nextSibling;\n                    if (!isNOU(nxtSib) && nxtSib.classList.contains(CLS_TB_ITEM)) {\n                        nxtSib.firstElementChild.focus();\n                    }\n                    this.removeTab(this.getEleIndex(trgParent));\n                }\n                this.setActiveBorder();\n                break;\n        }\n    };\n    /**\n     * Refresh the active tab border\n     *\n     * @returns {void}\n     * @private\n     */\n    Tab.prototype.refreshActiveTabBorder = function () {\n        var activeEle = select('.' + CLS_TB_ITEM + '.' + CLS_TB_POPUP + '.' + CLS_ACTIVE, this.element);\n        if (!isNOU(activeEle) && this.reorderActiveTab) {\n            this.select(this.getEleIndex(activeEle));\n        }\n        this.refreshActiveBorder();\n    };\n    Tab.prototype.refreshItemVisibility = function (target) {\n        var scrCnt = select('.' + this.scrCntClass, this.tbItems);\n        if (!this.isVertical() && !isNOU(scrCnt)) {\n            var scrBar = select('.e-hscroll-bar', this.tbItems);\n            var scrStart = scrBar.scrollLeft;\n            var scrEnd = scrStart + scrBar.offsetWidth;\n            var eleStart = target.offsetLeft;\n            var eleWidth = target.offsetWidth;\n            var eleEnd = target.offsetLeft + target.offsetWidth;\n            if ((scrStart < eleStart) && (scrEnd < eleEnd)) {\n                var eleViewRange = scrEnd - eleStart;\n                scrBar.scrollLeft = scrStart + (eleWidth - eleViewRange);\n            }\n            else {\n                if ((scrStart > eleStart) && (scrEnd > eleEnd)) {\n                    var eleViewRange = eleEnd - scrStart;\n                    scrBar.scrollLeft = scrStart - (eleWidth - eleViewRange);\n                }\n            }\n        }\n        else {\n            return;\n        }\n    };\n    Tab.prototype.hoverHandler = function (e) {\n        var trg = e.target;\n        if (!isNOU(trg.classList) && trg.classList.contains(CLS_ICON_CLOSE)) {\n            trg.setAttribute('title', new L10n('tab', { closeButtonTitle: this.title }, this.locale).getConstant('closeButtonTitle'));\n        }\n    };\n    Tab.prototype.evalOnPropertyChangeItems = function (newProp, oldProp) {\n        if (!(newProp.items instanceof Array && oldProp.items instanceof Array)) {\n            var changedProp = Object.keys(newProp.items);\n            for (var i = 0; i < changedProp.length; i++) {\n                var index = parseInt(Object.keys(newProp.items)[i], 10);\n                var properties = Object.keys(newProp.items[index]);\n                for (var j = 0; j < properties.length; j++) {\n                    var oldVal = Object(oldProp.items[index])[properties[j]];\n                    var newVal = Object(newProp.items[index])[properties[j]];\n                    var hdr = this.element.querySelectorAll('.' + CLS_TB_ITEM)[index];\n                    var itemIndex = void 0;\n                    if (hdr && !isNOU(hdr.id) && hdr.id !== '') {\n                        var num = (hdr.id.lastIndexOf('_'));\n                        itemIndex = parseInt(hdr.id.substring(num + 1), 10);\n                    }\n                    else {\n                        itemIndex = index;\n                    }\n                    var hdrItem = select('.' + CLS_TB_ITEMS + ' #' + CLS_ITEM + this.tabId + '_' + itemIndex, this.element);\n                    var cntItem = select('.' + CLS_CONTENT + ' #' + CLS_CONTENT + this.tabId + '_' + itemIndex, this.element);\n                    if (properties[j] === 'header' || properties[j] === 'headerTemplate') {\n                        var icon = (isNOU(this.items[index].header) ||\n                            isNOU(this.items[index].header.iconCss)) ? '' : this.items[index].header.iconCss;\n                        var textVal = this.items[index].headerTemplate || this.items[index].header.text;\n                        if ((textVal === '') && (icon === '')) {\n                            this.removeTab(index);\n                        }\n                        else {\n                            this.tbId = hdr.id;\n                            var arr = [];\n                            arr.push(this.items[index]);\n                            this.items.splice(index, 1);\n                            this.itemIndexArray.splice(index, 1);\n                            this.tbObj.items.splice(index, 1);\n                            var isHiddenEle = hdrItem.classList.contains(CLS_HIDDEN);\n                            detach(hdrItem);\n                            this.isReplace = true;\n                            this.addTab(arr, index);\n                            if (isHiddenEle) {\n                                this.hideTab(index);\n                            }\n                            this.isReplace = false;\n                        }\n                    }\n                    if (properties[j] === 'content' && !isNOU(cntItem)) {\n                        var strVal = typeof newVal === 'string' || isNOU(newVal.innerHTML);\n                        if (strVal && (newVal[0] === '.' || newVal[0] === '#') && newVal.length) {\n                            var eleVal = document.querySelector(newVal);\n                            cntItem.appendChild(eleVal);\n                            eleVal.style.display = '';\n                        }\n                        else if (newVal === '' && oldVal[0] === '#') {\n                            document.body.appendChild(this.element.querySelector(oldVal)).style.display = 'none';\n                            cntItem.innerHTML = newVal;\n                        }\n                        else if (this.isReact) {\n                            cntItem.innerHTML = '';\n                            this.templateCompile(cntItem, newVal, index);\n                        }\n                        else if (typeof newVal !== 'function') {\n                            cntItem.innerHTML = newVal;\n                        }\n                    }\n                    if (properties[j] === 'cssClass') {\n                        if (!isNOU(hdrItem)) {\n                            hdrItem.classList.remove(oldVal);\n                            hdrItem.classList.add(newVal);\n                        }\n                        if (!isNOU(cntItem)) {\n                            cntItem.classList.remove(oldVal);\n                            cntItem.classList.add(newVal);\n                        }\n                    }\n                    if (properties[j] === 'disabled') {\n                        this.enableTab(index, ((newVal === true) ? false : true));\n                    }\n                    if (properties[j] === 'visible') {\n                        this.hideTab(index, ((newVal === true) ? false : true));\n                    }\n                }\n            }\n        }\n        else {\n            this.lastIndex = 0;\n            if (isNOU(this.tbObj)) {\n                this.reRenderItems();\n            }\n            else {\n                if (this.isReact || this.isAngular) {\n                    this.clearTemplate();\n                }\n                this.setItems(newProp.items);\n                if (this.templateEle.length > 0) {\n                    this.expTemplateContent();\n                }\n                this.templateEle = [];\n                var selectElement = select('.' + CLS_TAB + ' > .' + CLS_CONTENT, this.element);\n                while (selectElement.firstElementChild) {\n                    detach(selectElement.firstElementChild);\n                }\n                this.select(this.selectedItem);\n                this.draggableItems = [];\n                this.bindDraggable();\n            }\n        }\n    };\n    Tab.prototype.initializeDrag = function (target) {\n        var _this = this;\n        var dragObj = new Draggable(target, {\n            dragArea: this.dragArea,\n            dragTarget: '.' + CLS_TB_ITEM,\n            clone: true,\n            helper: this.helper.bind(this),\n            dragStart: this.itemDragStart.bind(this),\n            drag: function (e) {\n                var dragIndex = _this.getEleIndex(_this.dragItem);\n                var dropIndex;\n                var dropItem;\n                var dragArgs = {\n                    draggedItem: _this.dragItem,\n                    event: e.event,\n                    target: e.target,\n                    droppedItem: e.target.closest('.' + CLS_TB_ITEM),\n                    clonedElement: _this.cloneElement,\n                    index: dragIndex\n                };\n                if (!isNOU(e.target.closest('.' + CLS_TAB)) && !e.target.closest('.' + CLS_TAB).isEqualNode(_this.element) &&\n                    _this.dragArea !== '.' + CLS_HEADER) {\n                    _this.trigger('dragging', dragArgs);\n                }\n                else {\n                    if (!(e.target.closest(_this.dragArea)) && _this.overflowMode !== 'Popup') {\n                        document.body.style.cursor = 'not-allowed';\n                        addClass([_this.cloneElement], CLS_HIDDEN);\n                        if (_this.dragItem.classList.contains(CLS_HIDDEN)) {\n                            removeClass([_this.dragItem], CLS_HIDDEN);\n                        }\n                        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n                    }\n                    else {\n                        document.body.style.cursor = '';\n                        _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n                        if (_this.cloneElement.classList.contains(CLS_HIDDEN)) {\n                            removeClass([_this.cloneElement], CLS_HIDDEN);\n                        }\n                    }\n                    if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n                        var scrollRightNavEle = _this.element.querySelector('.e-scroll-right-nav');\n                        var scrollLeftNavEle = _this.element.querySelector('.e-scroll-left-nav');\n                        var hscrollBar = _this.element.querySelector('.e-hscroll-bar');\n                        if (!isNOU(scrollRightNavEle) && Math.abs((scrollRightNavEle.offsetWidth / 2) +\n                            scrollRightNavEle.offsetLeft) > _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n                            hscrollBar.scrollLeft -= 10;\n                        }\n                        if (!isNOU(scrollLeftNavEle) && Math.abs((scrollLeftNavEle.offsetLeft + scrollLeftNavEle.offsetWidth) -\n                            _this.cloneElement.offsetLeft) > (scrollLeftNavEle.offsetWidth / 2)) {\n                            hscrollBar.scrollLeft += 10;\n                        }\n                    }\n                    _this.cloneElement.style.pointerEvents = 'none';\n                    dropItem = closest(e.target, '.' + CLS_TB_ITEM + '.e-draggable');\n                    var scrollContentWidth = 0;\n                    if (_this.overflowMode === 'Scrollable' && !isNOU(_this.element.querySelector('.e-hscroll'))) {\n                        scrollContentWidth = _this.element.querySelector('.e-hscroll-content').offsetWidth;\n                    }\n                    if (dropItem != null && !dropItem.isSameNode(_this.dragItem) &&\n                        dropItem.closest('.' + CLS_TAB).isSameNode(_this.dragItem.closest('.' + CLS_TAB))) {\n                        dropIndex = _this.getEleIndex(dropItem);\n                        if (dropIndex < dragIndex &&\n                            (Math.abs((dropItem.offsetLeft + dropItem.offsetWidth) -\n                                _this.cloneElement.offsetLeft) > (dropItem.offsetWidth / 2))) {\n                            _this.dragAction(dropItem, dragIndex, dropIndex);\n                        }\n                        if (dropIndex > dragIndex &&\n                            (Math.abs(dropItem.offsetWidth / 2) + dropItem.offsetLeft -\n                                scrollContentWidth) < _this.cloneElement.offsetLeft + _this.cloneElement.offsetWidth) {\n                            _this.dragAction(dropItem, dragIndex, dropIndex);\n                        }\n                    }\n                    _this.droppedIndex = _this.getEleIndex(_this.dragItem);\n                    _this.trigger('dragging', dragArgs);\n                }\n            },\n            dragStop: this.itemDragStop.bind(this)\n        });\n        this.draggableItems.push(dragObj);\n    };\n    Tab.prototype.helper = function (e) {\n        this.cloneElement = this.createElement('div');\n        if (e.element) {\n            this.cloneElement = (e.element.cloneNode(true));\n            addClass([this.cloneElement], 'e-tab-clone-element');\n            if (this.element.querySelector('.' + CLS_HEADER).classList.contains(CLS_CLOSE_SHOW)) {\n                addClass([this.cloneElement], CLS_CLOSE_SHOW);\n            }\n            removeClass([this.cloneElement.querySelector('.' + CLS_WRAP)], 'e-ripple');\n            if (!isNOU(this.cloneElement.querySelector('.e-ripple-element'))) {\n                remove(this.cloneElement.querySelector('.e-ripple-element'));\n            }\n            document.body.appendChild(this.cloneElement);\n        }\n        return this.cloneElement;\n    };\n    Tab.prototype.itemDragStart = function (e) {\n        var _this = this;\n        this.draggingItems = this.items.map(function (x) { return x; });\n        this.dragItem = e.element;\n        var dragArgs = {\n            draggedItem: e.element,\n            event: e.event,\n            target: e.target,\n            droppedItem: null,\n            index: this.getEleIndex(this.dragItem),\n            clonedElement: this.cloneElement,\n            cancel: false\n        };\n        this.trigger('onDragStart', dragArgs, function (tabitemDragArgs) {\n            if (tabitemDragArgs.cancel) {\n                detach(_this.cloneElement);\n            }\n            else {\n                _this.removeActiveClass();\n                addClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n                _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'hidden';\n            }\n        });\n    };\n    Tab.prototype.dragAction = function (dropItem, dragsIndex, dropIndex) {\n        if (this.items.length > 0) {\n            var item = this.draggingItems[dragsIndex];\n            this.draggingItems.splice(dragsIndex, 1);\n            this.draggingItems.splice(dropIndex, 0, item);\n        }\n        if (this.overflowMode === 'MultiRow') {\n            dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextElementSibling);\n        }\n        if (dragsIndex > dropIndex) {\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\n                if (this.overflowMode === 'Extended') {\n                    if (dropItem.isSameNode(dropItem.parentElement.lastChild)) {\n                        var popupContainer = this.dragItem.parentNode;\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                        popupContainer.insertBefore(dropItem.parentElement.lastChild, popupContainer.childNodes[0]);\n                    }\n                    else {\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement.lastChild), this.dragItem.parentElement.childNodes[0]);\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                    }\n                }\n                else {\n                    var lastEle = (dropItem.parentElement).lastChild;\n                    if (dropItem.isSameNode(lastEle)) {\n                        var popupContainer = this.dragItem.parentNode;\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                        popupContainer.insertBefore(lastEle, popupContainer.childNodes[0]);\n                    }\n                    else {\n                        this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\n                        dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                    }\n                }\n            }\n            else {\n                this.dragItem.parentNode.insertBefore(this.dragItem, dropItem);\n            }\n        }\n        if (dragsIndex < dropIndex) {\n            if (!(this.dragItem.parentElement).isSameNode(dropItem.parentElement)) {\n                if (this.overflowMode === 'Extended') {\n                    this.dragItem.parentElement.appendChild(dropItem.parentElement.firstElementChild);\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem.nextSibling);\n                }\n                else {\n                    this.dragItem.parentNode.insertBefore((dropItem.parentElement).lastChild, this.dragItem.parentElement.childNodes[0]);\n                    dropItem.parentNode.insertBefore(this.dragItem, dropItem);\n                }\n            }\n            else {\n                this.dragItem.parentNode.insertBefore(dropItem, this.dragItem);\n            }\n        }\n    };\n    Tab.prototype.itemDragStop = function (e) {\n        var _this = this;\n        detach(this.cloneElement);\n        this.cloneElement = null;\n        this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = 'visible';\n        document.body.style.cursor = '';\n        var dragStopArgs = {\n            draggedItem: this.dragItem,\n            event: e.event,\n            target: e.target,\n            droppedItem: this.tbItem[this.droppedIndex],\n            clonedElement: null,\n            index: this.droppedIndex,\n            cancel: false\n        };\n        this.trigger('dragged', dragStopArgs, function (tabItemDropArgs) {\n            if (tabItemDropArgs.cancel) {\n                _this.refresh();\n            }\n            else {\n                if (_this.items.length > 0 && _this.draggingItems.length > 0) {\n                    _this.items = _this.draggingItems;\n                    _this.selectedItem = _this.droppedIndex;\n                    _this.refresh();\n                }\n                else {\n                    _this.dragItem.querySelector('.' + CLS_WRAP).style.visibility = '';\n                    removeClass([_this.tbItems.querySelector('.' + CLS_INDICATOR)], CLS_HIDDEN);\n                    _this.selectTab(_this.droppedIndex, null, true);\n                }\n            }\n        });\n        this.dragItem = null;\n    };\n    /**\n     * Enables or disables the specified Tab item. On passing value as `false`, the item will be disabled.\n     *\n     * @param {number} index - Index value of target Tab item.\n     * @param {boolean} value - Boolean value that determines whether the command should be enabled or disabled.\n     * By default, isEnable is true.\n     * @returns {void}.\n     */\n    Tab.prototype.enableTab = function (index, value) {\n        var tbItems = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNOU(tbItems)) {\n            return;\n        }\n        if (value === true) {\n            tbItems.classList.remove(CLS_DISABLE, CLS_OVERLAY);\n            tbItems.firstElementChild.setAttribute('tabindex', '-1');\n        }\n        else {\n            tbItems.classList.add(CLS_DISABLE, CLS_OVERLAY);\n            tbItems.firstElementChild.removeAttribute('tabindex');\n            if (tbItems.classList.contains(CLS_ACTIVE)) {\n                this.select(index + 1);\n            }\n        }\n        if (!isNOU(this.items[index])) {\n            this.items[index].disabled = !value;\n            this.dataBind();\n        }\n        tbItems.setAttribute('aria-disabled', (value === true) ? 'false' : 'true');\n    };\n    /**\n     * Adds new items to the Tab that accepts an array as Tab items.\n     *\n     * @param {TabItemModel[]} items - An array of item that is added to the Tab.\n     * @param {number} index - Number value that determines where the items to be added. By default, index is 0.\n     * @returns {void}.\n     */\n    Tab.prototype.addTab = function (items, index) {\n        var _this = this;\n        var addArgs = { addedItems: items, cancel: false };\n        if (!this.isReplace) {\n            this.trigger('adding', addArgs, function (tabAddingArgs) {\n                if (!tabAddingArgs.cancel) {\n                    _this.addingTabContent(items, index);\n                }\n            });\n        }\n        else {\n            this.addingTabContent(items, index);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    Tab.prototype.addingTabContent = function (items, index) {\n        var _this = this;\n        var lastEleIndex = 0;\n        this.hdrEle = select('.' + CLS_HEADER, this.element);\n        if (isNOU(this.hdrEle)) {\n            this.items = items;\n            this.reRenderItems();\n            this.bindDraggable();\n        }\n        else {\n            var itemsCount = selectAll('.e-tab-header .' + CLS_TB_ITEM, this.element).length;\n            if (itemsCount !== 0) {\n                lastEleIndex = this.lastIndex + 1;\n            }\n            if (isNOU(index)) {\n                index = itemsCount - 1;\n            }\n            if (itemsCount < index || index < 0 || isNaN(index)) {\n                return;\n            }\n            if (itemsCount === 0 && !isNOU(this.hdrEle)) {\n                this.hdrEle.style.display = '';\n            }\n            if (!isNOU(this.bdrLine)) {\n                this.bdrLine.classList.add(CLS_HIDDEN);\n            }\n            this.tbItems = select('.' + CLS_TB_ITEMS, this.getTabHeader());\n            this.isAdd = true;\n            var tabItems = this.parseObject(items, index);\n            this.isAdd = false;\n            var i_1 = 0;\n            var textValue_1;\n            items.forEach(function (item, place) {\n                textValue_1 = item.headerTemplate || item.header.text;\n                if (!(isNOU(item.headerTemplate || item.header) || isNOU(textValue_1) ||\n                    (textValue_1.length === 0) && !isNOU(item.header) && isNOU(item.header.iconCss))) {\n                    _this.items.splice((index + i_1), 0, item);\n                    i_1++;\n                }\n                if (_this.isTemplate && !isNOU(item.header) && !isNOU(item.header.text)) {\n                    var no = lastEleIndex + place;\n                    var ele = _this.createElement('div', {\n                        id: CLS_CONTENT + _this.tabId + '_' + no, className: CLS_ITEM,\n                        attrs: { role: 'tabpanel', 'aria-labelledby': CLS_ITEM + '_' + no }\n                    });\n                    _this.cntEle.insertBefore(ele, _this.cntEle.children[(index + place)]);\n                    var eleTrg = _this.getTrgContent(_this.cntEle, no.toString());\n                    _this.getContent(eleTrg, item.content, 'render', index);\n                }\n            });\n            this.tbObj.addItems(tabItems, index);\n            if (!this.isReplace) {\n                this.trigger('added', { addedItems: items });\n            }\n            if (this.selectedItem === index) {\n                this.select(index);\n            }\n            else {\n                this.setActiveBorder();\n            }\n            this.bindDraggable();\n        }\n    };\n    /**\n     * Removes the items in the Tab from the specified index.\n     *\n     * @param {number} index - Index of target item that is going to be removed.\n     * @returns {void}.\n     */\n    Tab.prototype.removeTab = function (index) {\n        var _this = this;\n        var trg = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNOU(trg)) {\n            return;\n        }\n        var removeArgs = { removedItem: trg, removedIndex: index, cancel: false };\n        this.trigger('removing', removeArgs, function (tabRemovingArgs) {\n            if (!tabRemovingArgs.cancel) {\n                _this.tbObj.removeItems(index);\n                if (_this.allowDragAndDrop && (index !== Array.prototype.indexOf.call(_this.itemIndexArray, trg.id))) {\n                    index = Array.prototype.indexOf.call(_this.itemIndexArray, trg.id);\n                }\n                _this.items.splice(index, 1);\n                _this.itemIndexArray.splice(index, 1);\n                _this.refreshActiveBorder();\n                var cntTrg = select('#' + CLS_CONTENT + _this.tabId + '_' + _this.extIndex(trg.id), select('.' + CLS_CONTENT, _this.element));\n                if (!isNOU(cntTrg)) {\n                    detach(cntTrg);\n                }\n                _this.trigger('removed', tabRemovingArgs);\n                if (_this.draggableItems && _this.draggableItems.length > 0) {\n                    _this.draggableItems[index].destroy();\n                    _this.draggableItems[index] = null;\n                    _this.draggableItems.splice(index, 1);\n                }\n                if (trg.classList.contains(CLS_ACTIVE)) {\n                    index = (index > selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_TB_POPUP + ')', _this.element).length - 1) ? index - 1 : index;\n                    _this.enableAnimation = false;\n                    _this.selectedItem = index;\n                    _this.select(index);\n                }\n                else if (index !== _this.selectedItem) {\n                    if (index < _this.selectedItem) {\n                        index = _this.itemIndexArray.indexOf(_this.tbItem[_this.selectedItem].id);\n                        _this.setProperties({ selectedItem: index > -1 ? index : _this.selectedItem }, true);\n                        _this.prevIndex = _this.selectedItem;\n                    }\n                    _this.tbItem = selectAll('.' + CLS_TB_ITEM, _this.getTabHeader());\n                }\n                if (selectAll('.' + CLS_TB_ITEM, _this.element).length === 0) {\n                    _this.hdrEle.style.display = 'none';\n                }\n                _this.enableAnimation = true;\n            }\n        });\n    };\n    /**\n     * Shows or hides the Tab that is in the specified index.\n     *\n     * @param {number} index - Index value of target item.\n     * @param {boolean} value - Based on this Boolean value, item will be hide (false) or show (true). By default, value is true.\n     * @returns {void}.\n     */\n    Tab.prototype.hideTab = function (index, value) {\n        var items;\n        var item = selectAll('.' + CLS_TB_ITEM, this.element)[index];\n        if (isNOU(item)) {\n            return;\n        }\n        if (isNOU(value)) {\n            value = true;\n        }\n        this.bdrLine.classList.add(CLS_HIDDEN);\n        if (value === true) {\n            item.classList.add(CLS_HIDDEN);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n            if (items.length !== 0 && item.classList.contains(CLS_ACTIVE)) {\n                if (index !== 0) {\n                    for (var i = index - 1; i >= 0; i--) {\n                        if (!this.tbItem[i].classList.contains(CLS_HIDDEN)) {\n                            this.select(i);\n                            break;\n                        }\n                        else if (i === 0) {\n                            for (var k = index + 1; k < this.tbItem.length; k++) {\n                                if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n                                    this.select(k);\n                                    break;\n                                }\n                            }\n                        }\n                    }\n                }\n                else {\n                    for (var k = index + 1; k < this.tbItem.length; k++) {\n                        if (!this.tbItem[k].classList.contains(CLS_HIDDEN)) {\n                            this.select(k);\n                            break;\n                        }\n                    }\n                }\n            }\n            else if (items.length === 0) {\n                this.element.classList.add(CLS_HIDDEN);\n            }\n        }\n        else {\n            this.element.classList.remove(CLS_HIDDEN);\n            items = selectAll('.' + CLS_TB_ITEM + ':not(.' + CLS_HIDDEN + ')', this.tbItems);\n            item.classList.remove(CLS_HIDDEN);\n            if (items.length === 0) {\n                this.select(index);\n            }\n        }\n        this.setActiveBorder();\n        item.setAttribute('aria-hidden', '' + value);\n        if (this.overflowMode === 'Popup' && this.tbObj) {\n            this.tbObj.refreshOverflow();\n        }\n    };\n    Tab.prototype.selectTab = function (args, event, isInteracted) {\n        if (event === void 0) { event = null; }\n        if (isInteracted === void 0) { isInteracted = false; }\n        this.isInteracted = isInteracted;\n        this.select(args, event);\n    };\n    /**\n     * Specifies the index or HTMLElement to select an item from the Tab.\n     *\n     * @param {number | HTMLElement} args - Index or DOM element is used for selecting an item from the Tab.\n     * @param {Event} event - An event which takes place in DOM.\n     * @returns {void}\n     */\n    Tab.prototype.select = function (args, event) {\n        var _this = this;\n        var tabHeader = this.getTabHeader();\n        this.tbItems = select('.' + CLS_TB_ITEMS, tabHeader);\n        this.tbItem = selectAll('.' + CLS_TB_ITEM, tabHeader);\n        this.content = select('.' + CLS_CONTENT, this.element);\n        this.prevItem = this.tbItem[this.prevIndex];\n        if (isNOU(this.selectedItem) || (this.selectedItem < 0) || (this.tbItem.length <= this.selectedItem) || isNaN(this.selectedItem)) {\n            this.selectedItem = 0;\n        }\n        else {\n            this.selectedID = this.extIndex(this.tbItem[this.selectedItem].id);\n        }\n        var trg = this.tbItem[args];\n        if (isNOU(trg)) {\n            this.selectedID = '0';\n        }\n        else {\n            this.selectingID = this.extIndex(trg.id);\n        }\n        if (!isNOU(this.prevItem) && !this.prevItem.classList.contains(CLS_DISABLE)) {\n            this.prevItem.children.item(0).setAttribute('tabindex', '-1');\n        }\n        var eventArg = {\n            event: event,\n            previousItem: this.prevItem,\n            previousIndex: this.prevIndex,\n            selectedItem: this.tbItem[this.selectedItem],\n            selectedIndex: this.selectedItem,\n            selectedContent: !isNOU(this.content) ?\n                select('#' + CLS_CONTENT + this.tabId + '_' + this.selectedID, this.content) : null,\n            selectingItem: trg,\n            selectingIndex: args,\n            selectingContent: !isNOU(this.content) ?\n                select('#' + CLS_CONTENT + this.tabId + '_' + this.selectingID, this.content) : null,\n            isSwiped: this.isSwipeed,\n            isInteracted: this.isInteracted,\n            cancel: false\n        };\n        if (!this.initRender) {\n            this.trigger('selecting', eventArg, function (selectArgs) {\n                if (!selectArgs.cancel) {\n                    _this.selectingContent(args, _this.isInteracted);\n                }\n            });\n        }\n        else {\n            this.selectingContent(args, this.isInteracted);\n        }\n        this.isInteracted = false;\n    };\n    Tab.prototype.selectingContent = function (args, isInteracted) {\n        if (typeof args === 'number') {\n            if (!isNOU(this.tbItem[args]) && (this.tbItem[args].classList.contains(CLS_DISABLE) ||\n                this.tbItem[args].classList.contains(CLS_HIDDEN))) {\n                for (var i = args + 1; i < this.items.length; i++) {\n                    if (this.items[i].disabled === false && this.items[i].visible === true) {\n                        args = i;\n                        break;\n                    }\n                    else {\n                        args = 0;\n                    }\n                }\n            }\n            if (this.tbItem.length > args && args >= 0 && !isNaN(args)) {\n                this.prevIndex = this.selectedItem;\n                this.prevItem = this.tbItem[this.prevIndex];\n                if (this.tbItem[args].classList.contains(CLS_TB_POPUP) && this.reorderActiveTab) {\n                    this.setActive(this.popupHandler(this.tbItem[args]), null, isInteracted);\n                    if ((!isNOU(this.items) && this.items.length > 0) && this.allowDragAndDrop) {\n                        this.tbItem = selectAll('.' + CLS_TB_ITEMS + ' .' + CLS_TB_ITEM, this.hdrEle);\n                        var item = this.items[args];\n                        this.items.splice(args, 1);\n                        this.items.splice(this.tbItem.length - 1, 0, item);\n                    }\n                }\n                else {\n                    this.setActive(args, null, isInteracted);\n                }\n            }\n            else {\n                this.setActive(0, null, isInteracted);\n            }\n        }\n        else if (args instanceof (HTMLElement)) {\n            this.setActive(this.getEleIndex(args), null, isInteracted);\n        }\n    };\n    /**\n     * Gets the item index from the Tab.\n     *\n     * @param  {string} tabItemId - Item ID is used for getting index from the Tab.\n     * @returns {number} - It returns item index.\n     */\n    Tab.prototype.getItemIndex = function (tabItemId) {\n        var tabIndex;\n        for (var i = 0; i < this.tbItem.length; i++) {\n            var value = this.tbItem[i].getAttribute('data-id');\n            if (tabItemId === value) {\n                tabIndex = i;\n                break;\n            }\n        }\n        return tabIndex;\n    };\n    /**\n     * Specifies the value to disable/enable the Tab component.\n     * When set to `true`, the component will be disabled.\n     *\n     * @param  {boolean} value - Based on this Boolean value, Tab will be enabled (false) or disabled (true).\n     * @returns {void}.\n     */\n    Tab.prototype.disable = function (value) {\n        this.setCssClass(this.element, CLS_DISABLE, value);\n        this.element.setAttribute('aria-disabled', '' + value);\n    };\n    /**\n     * Get the properties to be maintained in the persisted state.\n     *\n     * @returns {string} - It returns the persisted state.\n     */\n    Tab.prototype.getPersistData = function () {\n        return this.addOnPersist(['selectedItem', 'actEleId']);\n    };\n    /**\n     * Returns the current module name.\n     *\n     * @returns {string} - It returns the current module name.\n     * @private\n     */\n    Tab.prototype.getModuleName = function () {\n        return 'tab';\n    };\n    /**\n     * Gets called when the model property changes.The data that describes the old and new values of the property that changed.\n     *\n     * @param  {TabModel} newProp - It contains the new value of data.\n     * @param  {TabModel} oldProp - It contains the old value of data.\n     * @returns {void}\n     * @private\n     */\n    Tab.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            switch (prop) {\n                case 'width':\n                    setStyle(this.element, { width: formatUnit(newProp.width) });\n                    break;\n                case 'height':\n                    setStyle(this.element, { height: formatUnit(newProp.height) });\n                    this.setContentHeight(false);\n                    break;\n                case 'cssClass':\n                    if (oldProp.cssClass !== '' && !isNullOrUndefined(oldProp.cssClass)) {\n                        this.setCssClass(this.element, oldProp.cssClass, false);\n                        this.setCssClass(this.element, newProp.cssClass, true);\n                    }\n                    else {\n                        this.setCssClass(this.element, newProp.cssClass, true);\n                    }\n                    break;\n                case 'items':\n                    this.evalOnPropertyChangeItems(newProp, oldProp);\n                    break;\n                case 'showCloseButton':\n                    this.setCloseButton(newProp.showCloseButton);\n                    break;\n                case 'reorderActiveTab':\n                    this.refreshActiveTabBorder();\n                    break;\n                case 'selectedItem':\n                    this.selectedItem = oldProp.selectedItem;\n                    this.select(newProp.selectedItem);\n                    break;\n                case 'headerPlacement':\n                    this.changeOrientation(newProp.headerPlacement);\n                    break;\n                case 'enableRtl':\n                    this.setRTL(newProp.enableRtl);\n                    break;\n                case 'overflowMode':\n                    this.tbObj.overflowMode = newProp.overflowMode;\n                    this.tbObj.dataBind();\n                    this.refreshActiveTabBorder();\n                    break;\n                case 'heightAdjustMode':\n                    this.setContentHeight(false);\n                    this.select(this.selectedItem);\n                    break;\n                case 'scrollStep':\n                    if (this.tbObj) {\n                        this.tbObj.scrollStep = this.scrollStep;\n                    }\n                    break;\n                case 'allowDragAndDrop':\n                    this.bindDraggable();\n                    break;\n                case 'dragArea':\n                    if (this.allowDragAndDrop) {\n                        this.draggableItems.forEach(function (item) {\n                            item.dragArea = _this.dragArea;\n                        });\n                        this.refresh();\n                    }\n                    break;\n            }\n        }\n    };\n    Tab.prototype.refreshActiveTab = function () {\n        if (this.isReact) {\n            this.clearTemplate();\n        }\n        if (!this.isTemplate) {\n            if (this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE)) {\n                detach(this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).children[0]);\n                detach(this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0]);\n                var item = this.items[this.selectedItem];\n                var pos = (isNOU(item.header) || isNOU(item.header.iconPosition)) ? '' : item.header.iconPosition;\n                var css = (isNOU(item.header) || isNOU(item.header.iconCss)) ? '' : item.header.iconCss;\n                var text = item.headerTemplate || item.header.text;\n                var txtWrap = this.createElement('div', { className: CLS_TEXT, attrs: { 'role': 'presentation' } });\n                if (!isNOU(text.tagName)) {\n                    txtWrap.appendChild(text);\n                }\n                else {\n                    this.headerTextCompile(txtWrap, text, this.selectedItem);\n                }\n                var tEle = void 0;\n                var icon = this.createElement('span', {\n                    className: CLS_ICONS + ' ' + CLS_TAB_ICON + ' ' + CLS_ICON + '-' + pos + ' ' + css\n                });\n                var tConts = this.createElement('div', { className: CLS_TEXT_WRAP });\n                tConts.appendChild(txtWrap);\n                if ((text !== '' && text !== undefined) && css !== '') {\n                    if ((pos === 'left' || pos === 'top')) {\n                        tConts.insertBefore(icon, tConts.firstElementChild);\n                    }\n                    else {\n                        tConts.appendChild(icon);\n                    }\n                    tEle = txtWrap;\n                    this.isIconAlone = false;\n                }\n                else {\n                    tEle = ((css === '') ? txtWrap : icon);\n                    if (tEle === icon) {\n                        detach(txtWrap);\n                        tConts.appendChild(icon);\n                        this.isIconAlone = true;\n                    }\n                }\n                var wrapAtt = (item.disabled) ? {} : { tabIndex: '-1' };\n                tConts.appendChild(this.btnCls.cloneNode(true));\n                var wraper = this.createElement('div', { className: CLS_WRAP, attrs: wrapAtt });\n                wraper.appendChild(tConts);\n                if (pos === 'top' || pos === 'bottom') {\n                    this.element.classList.add('e-vertical-icon');\n                }\n                this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wraper);\n                var crElem = this.createElement('div');\n                var cnt = item.content;\n                var eleStr = void 0;\n                if (typeof cnt === 'string' || isNOU(cnt.innerHTML)) {\n                    if (typeof cnt === 'string' && this.enableHtmlSanitizer) {\n                        cnt = SanitizeHtmlHelper.sanitize(cnt);\n                    }\n                    if (cnt[0] === '.' || cnt[0] === '#') {\n                        if (document.querySelectorAll(cnt).length) {\n                            var eleVal = document.querySelector(cnt);\n                            eleStr = eleVal.outerHTML.trim();\n                            crElem.appendChild(eleVal);\n                            eleVal.style.display = '';\n                        }\n                        else {\n                            this.compileElement(crElem, cnt, 'content', this.selectedItem);\n                        }\n                    }\n                    else {\n                        this.compileElement(crElem, cnt, 'content', this.selectedItem);\n                    }\n                }\n                else {\n                    crElem.appendChild(cnt);\n                }\n                if (!isNOU(eleStr)) {\n                    if (this.templateEle.indexOf(cnt.toString()) === -1) {\n                        this.templateEle.push(cnt.toString());\n                    }\n                }\n                this.element.querySelector('.' + CLS_ITEM + '.' + CLS_ACTIVE).appendChild(crElem);\n            }\n        }\n        else {\n            var tabItems = this.element.querySelector('.' + CLS_TB_ITEMS);\n            var element = this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE);\n            var id = element.id;\n            var num = (id.indexOf('_'));\n            var index = parseInt(id.substring(num + 1), 10);\n            var header = element.innerText;\n            var detachContent = this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).children[0];\n            var mainContents = detachContent.innerHTML;\n            detach(element);\n            detach(detachContent);\n            var attr = {\n                className: CLS_TB_ITEM + ' ' + CLS_TEMPLATE + ' ' + CLS_ACTIVE, id: CLS_ITEM + this.tabId + '_' + index,\n                attrs: {\n                    role: 'tab', 'aria-controls': CLS_CONTENT + this.tabId + '_' + index,\n                    'aria-disabled': 'false', 'aria-selected': 'true'\n                }\n            };\n            var txtString = this.createElement('span', {\n                className: CLS_TEXT, innerHTML: header, attrs: { 'role': 'presentation' }\n            }).outerHTML;\n            var conte = this.createElement('div', {\n                className: CLS_TEXT_WRAP, innerHTML: txtString + this.btnCls.outerHTML\n            }).outerHTML;\n            var wrap = this.createElement('div', { className: CLS_WRAP, innerHTML: conte, attrs: { tabIndex: '-1' } });\n            tabItems.insertBefore(this.createElement('div', attr), tabItems.children[index + 1]);\n            this.element.querySelector('.' + CLS_TB_ITEM + '.' + CLS_ACTIVE).appendChild(wrap);\n            var crElem = this.createElement('div', { innerHTML: mainContents });\n            this.element.querySelector('.' + CLS_CONTENT).querySelector('.' + CLS_ACTIVE).appendChild(crElem);\n        }\n        if (this.isReact) {\n            this.renderReactTemplates();\n        }\n    };\n    __decorate([\n        Collection([], TabItem)\n    ], Tab.prototype, \"items\", void 0);\n    __decorate([\n        Property('100%')\n    ], Tab.prototype, \"width\", void 0);\n    __decorate([\n        Property('auto')\n    ], Tab.prototype, \"height\", void 0);\n    __decorate([\n        Property('')\n    ], Tab.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(0)\n    ], Tab.prototype, \"selectedItem\", void 0);\n    __decorate([\n        Property('Top')\n    ], Tab.prototype, \"headerPlacement\", void 0);\n    __decorate([\n        Property('Content')\n    ], Tab.prototype, \"heightAdjustMode\", void 0);\n    __decorate([\n        Property('Scrollable')\n    ], Tab.prototype, \"overflowMode\", void 0);\n    __decorate([\n        Property('Dynamic')\n    ], Tab.prototype, \"loadOn\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"enableHtmlSanitizer\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"showCloseButton\", void 0);\n    __decorate([\n        Property(true)\n    ], Tab.prototype, \"reorderActiveTab\", void 0);\n    __decorate([\n        Property()\n    ], Tab.prototype, \"scrollStep\", void 0);\n    __decorate([\n        Property()\n    ], Tab.prototype, \"dragArea\", void 0);\n    __decorate([\n        Property(false)\n    ], Tab.prototype, \"allowDragAndDrop\", void 0);\n    __decorate([\n        Complex({}, TabAnimationSettings)\n    ], Tab.prototype, \"animation\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"created\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"adding\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"added\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"selecting\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"selected\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"removing\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"removed\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"onDragStart\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"dragging\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"dragged\", void 0);\n    __decorate([\n        Event()\n    ], Tab.prototype, \"destroyed\", void 0);\n    Tab = __decorate([\n        NotifyPropertyChanges\n    ], Tab);\n    return Tab;\n}(Component));\nexport { Tab };\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}